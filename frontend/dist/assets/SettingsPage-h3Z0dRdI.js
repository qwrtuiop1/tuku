const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/element-BdwomdJ_.js","assets/vendor-BcB6VvZI.js"])))=>i.map(i=>d[i]);
import{a as Q,_ as Te}from"./index-nNwU4HUA.js";import{_ as De}from"./_plugin-vue_export-helper-BwE83l92.js";/* empty css               *//* empty css                 *//* empty css                   *//* empty css                  *//* empty css                 *//* empty css                        *//* empty css                  *//* empty css                       *//* empty css                  *//* empty css                    *//* empty css                */import"./el-form-item-l0sNRNKZ.js";/* empty css                *//* empty css                     */import{c as Re,aq as Me,b as ze,C as ye,ar as je,y as Be,F as Ke,M as We,O as Ge,q as He,l as Oe,aL as $e,aM as Je,aN as W,d as Xe,e as Ye,f as Ze,w as M,aB as he,aC as el,h as ll,aA as tl,aH as al,aI as ol,aO as nl,al as sl,az as il,aP as rl,af as dl,z as ul,aJ as pl,E as p}from"./element-BdwomdJ_.js";import{y as ml,r as L,l as z,c as gl,j as fl,z as C,B as o,R as l,J as t,A as V,O as d,u as y,L as E,I as P,P as ae}from"./vendor-BcB6VvZI.js";const bl={class:"settings-page"},vl={class:"page-header"},yl={class:"header-content"},wl={class:"header-actions"},ql={class:"settings-content"},_l={key:0,class:"settings-section"},cl={key:1,class:"settings-section"},Vl={key:2,class:"settings-section"},xl={key:3,class:"settings-section"},El={key:4,class:"settings-section"},Ll={key:5,class:"settings-section integration-section"},Il={class:"form-description"},Sl={class:"form-description"},Al={key:0,class:"form-description",style:{"margin-top":"8px",color:"#e6a23c"}},kl=ml({__name:"SettingsPage",setup(Ul){const X=L(!1),w=L(!1),S=L("general"),Y=L(),Z=L(),h=L(),we=L(),qe=L(),ee=L(),le=L(!1),te=L(!1),A=z({systemName:"",systemDescription:""}),v=z({maxFileSize:100,maxUploadFiles:10,allowedImageTypes:["jpg","jpeg","png","gif","webp"],allowedVideoTypes:["mp4","webm","mov"],thumbnailSize:300}),f=z({minPasswordLength:6,enableLoginLock:!0,maxLoginAttempts:5,lockoutDuration:15,sessionTimeout:120}),u=z({enableEmailNotification:!1,smtpHost:"",smtpPort:587,smtpUsername:"",smtpPassword:"",senderEmail:"",senderName:"图库系统",enableSystemNotification:!0}),g=z({themeMode:"light",primaryColor:"#409EFF",sidebarWidth:240,enableAnimation:!0,logoUrl:"/logo.png",faviconUrl:"/logo.png"}),a=z({qqLoginEnabled:!1,qqAppId:"",qqAppKey:"",wechatLoginEnabled:!1,wechatAppId:"",wechatAppSecret:""}),T=L({qqLoginEnabled:!1,wechatLoginEnabled:!1,qqAppId:"",wechatAppId:""}),G=gl(()=>a.qqLoginEnabled!==T.value.qqLoginEnabled||a.wechatLoginEnabled!==T.value.wechatLoginEnabled||a.qqAppId!==T.value.qqAppId||a.wechatAppId!==T.value.wechatAppId),_e={systemName:[{required:!0,message:"请输入系统名称",trigger:"blur"},{max:50,message:"系统名称长度不能超过 50 个字符",trigger:"blur"}],systemDescription:[{max:200,message:"系统描述长度不能超过 200 个字符",trigger:"blur"}]},ce={maxFileSize:[{required:!0,message:"请输入最大文件大小",trigger:"blur"}],maxUploadFiles:[{required:!0,message:"请输入最大上传文件数",trigger:"blur"}],thumbnailSize:[{required:!0,message:"请输入缩略图尺寸",trigger:"blur"}]},Ve={minPasswordLength:[{required:!0,message:"请输入密码最小长度",trigger:"blur"}],maxLoginAttempts:[{required:!0,message:"请输入最大失败次数",trigger:"blur"}],lockoutDuration:[{required:!0,message:"请输入锁定时间",trigger:"blur"}],sessionTimeout:[{required:!0,message:"请输入会话超时时间",trigger:"blur"}]},xe=i=>{S.value=i},Ee=async()=>{X.value=!0;try{await oe(),p.success("设置已刷新")}catch{p.error("刷新设置失败")}finally{X.value=!1}},oe=async()=>{var i,e,m,_,b,q,F,N,c,s,k,I,x,j,U,D,H,O,$,R,B,K,J,n,se,ie,re,de,ue,pe,me,ge,fe,be;try{const r=(await Q.get("/admin/settings")).data.settings||{};A.systemName=((i=r.system_name)==null?void 0:i.value)||"图库系统",A.systemDescription=((e=r.system_description)==null?void 0:e.value)||"",v.maxFileSize=parseInt((m=r.max_file_size)==null?void 0:m.value)||100,v.maxUploadFiles=parseInt((_=r.max_upload_files)==null?void 0:_.value)||10,v.allowedImageTypes=((q=(b=r.allowed_image_types)==null?void 0:b.value)==null?void 0:q.split(","))||["jpg","jpeg","png","gif","webp"],v.allowedVideoTypes=((N=(F=r.allowed_video_types)==null?void 0:F.value)==null?void 0:N.split(","))||["mp4","webm","mov"],v.thumbnailSize=parseInt((c=r.thumbnail_size)==null?void 0:c.value)||300,f.minPasswordLength=parseInt((s=r.min_password_length)==null?void 0:s.value)||6,f.enableLoginLock=((k=r.enable_login_lock)==null?void 0:k.value)==="true",f.maxLoginAttempts=parseInt((I=r.max_login_attempts)==null?void 0:I.value)||5,f.lockoutDuration=parseInt((x=r.lockout_duration)==null?void 0:x.value)||15,f.sessionTimeout=parseInt((j=r.session_timeout)==null?void 0:j.value)||120,u.enableEmailNotification=((U=r.enable_email_notification)==null?void 0:U.value)==="true",u.smtpHost=((D=r.smtp_host)==null?void 0:D.value)||"",u.smtpPort=parseInt((H=r.smtp_port)==null?void 0:H.value)||587,u.smtpUsername=((O=r.smtp_username)==null?void 0:O.value)||"",u.smtpPassword=(($=r.smtp_password)==null?void 0:$.value)||"",u.senderEmail=((R=r.sender_email)==null?void 0:R.value)||"",u.senderName=((B=r.sender_name)==null?void 0:B.value)||"图库系统",u.enableSystemNotification=((K=r.enable_system_notification)==null?void 0:K.value)==="true",g.themeMode=((J=r.theme_mode)==null?void 0:J.value)||"light",g.primaryColor=((n=r.primary_color)==null?void 0:n.value)||"#409EFF",g.sidebarWidth=parseInt((se=r.sidebar_width)==null?void 0:se.value)||240,g.enableAnimation=((ie=r.enable_animation)==null?void 0:ie.value)==="true",g.logoUrl=((re=r.logo_url)==null?void 0:re.value)||"/logo.png",g.faviconUrl=((de=r.favicon_url)==null?void 0:de.value)||"/logo.png",a.qqLoginEnabled=((ue=r.qq_login_enabled)==null?void 0:ue.value)==="true",a.qqAppId=((pe=r.qq_app_id)==null?void 0:pe.value)||"",a.qqAppKey=((me=r.qq_app_key)==null?void 0:me.value)||"",a.wechatLoginEnabled=((ge=r.wechat_login_enabled)==null?void 0:ge.value)==="true",a.wechatAppId=((fe=r.wechat_app_id)==null?void 0:fe.value)||"",a.wechatAppSecret=((be=r.wechat_app_secret)==null?void 0:be.value)||"",T.value={qqLoginEnabled:a.qqLoginEnabled,wechatLoginEnabled:a.wechatLoginEnabled,qqAppId:a.qqAppId,wechatAppId:a.wechatAppId}}catch(ve){throw ve}},Le=async()=>{if(Y.value)try{await Y.value.validate(),w.value=!0;const i={system_name:A.systemName,system_description:A.systemDescription};await Q.put("/admin/settings",{settings:i}),p.success("常规设置保存成功")}catch{p.error("保存常规设置失败")}finally{w.value=!1}},Ie=async()=>{if(Z.value)try{await Z.value.validate(),w.value=!0;const i={max_file_size:v.maxFileSize.toString(),max_upload_files:v.maxUploadFiles.toString(),allowed_image_types:v.allowedImageTypes.join(","),allowed_video_types:v.allowedVideoTypes.join(","),thumbnail_size:v.thumbnailSize.toString()};await Q.put("/admin/settings",{settings:i}),p.success("存储设置保存成功")}catch{p.error("保存存储设置失败")}finally{w.value=!1}},Se=async()=>{if(h.value)try{await h.value.validate(),w.value=!0;const i={min_password_length:f.minPasswordLength.toString(),enable_login_lock:f.enableLoginLock.toString(),max_login_attempts:f.maxLoginAttempts.toString(),lockout_duration:f.lockoutDuration.toString(),session_timeout:f.sessionTimeout.toString()};await Q.put("/admin/settings",{settings:i}),p.success("安全设置保存成功")}catch{p.error("保存安全设置失败")}finally{w.value=!1}},Ae=async()=>{try{w.value=!0;const i={enable_email_notification:u.enableEmailNotification.toString(),smtp_host:u.smtpHost,smtp_port:u.smtpPort.toString(),smtp_username:u.smtpUsername,smtp_password:u.smtpPassword,sender_email:u.senderEmail,sender_name:u.senderName,enable_system_notification:u.enableSystemNotification.toString()};await Q.put("/admin/settings",{settings:i}),p.success("通知设置保存成功")}catch{p.error("保存通知设置失败")}finally{w.value=!1}},ke=async()=>{try{w.value=!0;const i={theme_mode:g.themeMode,primary_color:g.primaryColor,sidebar_width:g.sidebarWidth.toString(),enable_animation:g.enableAnimation.toString(),logo_url:g.logoUrl,favicon_url:g.faviconUrl};await Q.put("/admin/settings",{settings:i}),p.success("外观设置保存成功")}catch{p.error("保存外观设置失败")}finally{w.value=!1}},Ue=async()=>{var i,e,m,_;if(ee.value)try{await ee.value.validate();const b=[];if(a.qqLoginEnabled&&b.push("QQ登录"),a.wechatLoginEnabled&&b.push("微信登录"),b.length>0){const{ElMessageBox:N}=await Te(async()=>{const{ElMessageBox:c}=await import("./element-BdwomdJ_.js").then(s=>s.aQ);return{ElMessageBox:c}},__vite__mapDeps([0,1]));await N.confirm(`确定要启用 ${b.join("、")} 吗？

启用后用户将可以使用这些第三方账号登录系统。`,"确认启用第三方登录",{confirmButtonText:"确定启用",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!1})}w.value=!0;const q={qq_login_enabled:a.qqLoginEnabled.toString(),wechat_login_enabled:a.wechatLoginEnabled.toString()};a.qqLoginEnabled?(q.qq_app_id=a.qqAppId,q.qq_app_key=a.qqAppKey):(q.qq_app_id="",q.qq_app_key=""),a.wechatLoginEnabled?(q.wechat_app_id=a.wechatAppId,q.wechat_app_secret=a.wechatAppSecret):(q.wechat_app_id="",q.wechat_app_secret=""),console.log("保存第三方集成设置:",q);const F=await Q.put("/admin/settings",{settings:q});F.data.success!==!1?(p.success("第三方集成设置保存成功"),T.value={qqLoginEnabled:a.qqLoginEnabled,wechatLoginEnabled:a.wechatLoginEnabled,qqAppId:a.qqAppId,wechatAppId:a.wechatAppId},b.length>0?p.info(`已启用: ${b.join("、")}`):p.info("所有第三方登录服务已禁用")):p.error(F.data.message||"保存第三方集成设置失败")}catch(b){if(console.error("保存第三方集成设置失败:",b),b==="cancel")return;if((e=(i=b.response)==null?void 0:i.data)!=null&&e.errors){const q=b.response.data.errors;p.error(`设置验证失败: ${q.join(", ")}`)}else(_=(m=b.response)==null?void 0:m.data)!=null&&_.message?p.error(b.response.data.message):p.error("保存第三方集成设置失败，请检查网络连接")}finally{w.value=!1}},Qe=i=>{i||(a.qqAppId="",a.qqAppKey="")},Fe=i=>{i||(a.wechatAppId="",a.wechatAppSecret="")},ne=i=>`${window.location.origin}/api/auth/${i}/callback`,Ce=async()=>{if(!a.qqAppId){p.warning("请先填写QQ应用ID");return}le.value=!0;try{const i=await Q.post("/admin/test-connection",{type:"qq",appId:a.qqAppId,appKey:a.qqAppKey});i.data.success?p.success("QQ连接测试成功"):p.error(i.data.message||"QQ连接测试失败")}catch{p.error("QQ连接测试失败，请检查配置")}finally{le.value=!1}},Ne=async()=>{if(!a.wechatAppId){p.warning("请先填写微信应用ID");return}te.value=!0;try{const i=await Q.post("/admin/test-connection",{type:"wechat",appId:a.wechatAppId,appSecret:a.wechatAppSecret});i.data.success?p.success("微信连接测试成功"):p.error(i.data.message||"微信连接测试失败")}catch{p.error("微信连接测试失败，请检查配置")}finally{te.value=!1}},Pe=()=>{a.qqLoginEnabled=!1,a.qqAppId="",a.qqAppKey="",a.wechatLoginEnabled=!1,a.wechatAppId="",a.wechatAppSecret="",p.info("第三方集成设置已重置")};return fl(()=>{oe()}),(i,e)=>{const m=ze,_=Re,b=We,q=Ke,F=Be,N=je,c=Ze,s=Ye,k=Xe,I=he,x=ll,j=el,U=tl,D=ol,H=al,O=nl,$=sl,R=il,B=rl,K=dl,J=Me;return V(),C("div",bl,[o("div",vl,[o("div",yl,[e[31]||(e[31]=o("div",{class:"header-left"},[o("h1",{class:"page-title"},"系统设置"),o("p",{class:"page-subtitle"},"配置系统参数和功能选项")],-1)),o("div",wl,[l(_,{onClick:Ee,loading:X.value},{default:t(()=>[l(m,null,{default:t(()=>[l(y(ye))]),_:1}),e[30]||(e[30]=d(" 刷新 ",-1))]),_:1},8,["loading"])])])]),o("div",ql,[l(J,{gutter:24},{default:t(()=>[l(N,{xs:24,sm:6,md:6,lg:6,xl:6},{default:t(()=>[l(F,{class:"settings-nav-card"},{default:t(()=>[l(q,{modelValue:S.value,"onUpdate:modelValue":e[0]||(e[0]=n=>S.value=n),class:"settings-menu",onSelect:xe},{default:t(()=>[l(b,{index:"general"},{default:t(()=>[l(m,null,{default:t(()=>[l(y(Ge))]),_:1}),e[32]||(e[32]=o("span",null,"常规设置",-1))]),_:1}),l(b,{index:"storage"},{default:t(()=>[l(m,null,{default:t(()=>[l(y(He))]),_:1}),e[33]||(e[33]=o("span",null,"存储设置",-1))]),_:1}),l(b,{index:"security"},{default:t(()=>[l(m,null,{default:t(()=>[l(y(Oe))]),_:1}),e[34]||(e[34]=o("span",null,"安全设置",-1))]),_:1}),l(b,{index:"notification"},{default:t(()=>[l(m,null,{default:t(()=>[l(y($e))]),_:1}),e[35]||(e[35]=o("span",null,"通知设置",-1))]),_:1}),l(b,{index:"appearance"},{default:t(()=>[l(m,null,{default:t(()=>[l(y(Je))]),_:1}),e[36]||(e[36]=o("span",null,"外观设置",-1))]),_:1}),l(b,{index:"integration"},{default:t(()=>[l(m,null,{default:t(()=>[l(y(W))]),_:1}),e[37]||(e[37]=o("span",null,"第三方集成",-1))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(N,{xs:24,sm:18,md:18,lg:18,xl:18},{default:t(()=>[l(F,{class:"settings-panel-card"},{default:t(()=>[S.value==="general"?(V(),C("div",_l,[e[39]||(e[39]=o("div",{class:"section-header"},[o("h3",null,"常规设置"),o("p",null,"配置系统基本参数")],-1)),l(k,{model:A,rules:_e,ref_key:"generalFormRef",ref:Y,"label-width":"120px",class:"settings-form"},{default:t(()=>[l(s,{label:"系统名称",prop:"systemName"},{default:t(()=>[l(c,{modelValue:A.systemName,"onUpdate:modelValue":e[1]||(e[1]=n=>A.systemName=n),placeholder:"请输入系统名称"},null,8,["modelValue"])]),_:1}),l(s,{label:"系统描述",prop:"systemDescription"},{default:t(()=>[l(c,{modelValue:A.systemDescription,"onUpdate:modelValue":e[2]||(e[2]=n=>A.systemDescription=n),type:"textarea",rows:3,placeholder:"请输入系统描述"},null,8,["modelValue"])]),_:1}),l(s,null,{default:t(()=>[l(_,{type:"primary",onClick:Le,loading:w.value},{default:t(()=>[l(m,null,{default:t(()=>[l(y(M))]),_:1}),e[38]||(e[38]=d(" 保存设置 ",-1))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])):E("",!0),S.value==="storage"?(V(),C("div",cl,[e[60]||(e[60]=o("div",{class:"section-header"},[o("h3",null,"存储设置"),o("p",null,"配置文件存储相关参数")],-1)),l(k,{model:v,rules:ce,ref_key:"storageFormRef",ref:Z,"label-width":"120px",class:"settings-form"},{default:t(()=>[l(s,{label:"最大文件大小",prop:"maxFileSize"},{default:t(()=>[l(I,{modelValue:v.maxFileSize,"onUpdate:modelValue":e[3]||(e[3]=n=>v.maxFileSize=n),min:1,max:1e3,"controls-position":"right",style:{width:"200px"}},null,8,["modelValue"]),e[40]||(e[40]=o("span",{class:"form-unit"},"MB",-1)),e[41]||(e[41]=o("span",{class:"form-description"},"单个文件上传的最大大小限制",-1))]),_:1}),l(s,{label:"单次上传文件数",prop:"maxUploadFiles"},{default:t(()=>[l(I,{modelValue:v.maxUploadFiles,"onUpdate:modelValue":e[4]||(e[4]=n=>v.maxUploadFiles=n),min:1,max:50,"controls-position":"right",style:{width:"200px"}},null,8,["modelValue"]),e[42]||(e[42]=o("span",{class:"form-unit"},"个",-1)),e[43]||(e[43]=o("span",{class:"form-description"},"单次最多可以上传的文件数量",-1))]),_:1}),l(s,{label:"允许的图片类型"},{default:t(()=>[l(j,{modelValue:v.allowedImageTypes,"onUpdate:modelValue":e[5]||(e[5]=n=>v.allowedImageTypes=n)},{default:t(()=>[l(x,{label:"jpg"},{default:t(()=>[...e[44]||(e[44]=[d("JPG",-1)])]),_:1}),l(x,{label:"jpeg"},{default:t(()=>[...e[45]||(e[45]=[d("JPEG",-1)])]),_:1}),l(x,{label:"png"},{default:t(()=>[...e[46]||(e[46]=[d("PNG",-1)])]),_:1}),l(x,{label:"gif"},{default:t(()=>[...e[47]||(e[47]=[d("GIF",-1)])]),_:1}),l(x,{label:"webp"},{default:t(()=>[...e[48]||(e[48]=[d("WebP",-1)])]),_:1}),l(x,{label:"svg"},{default:t(()=>[...e[49]||(e[49]=[d("SVG",-1)])]),_:1})]),_:1},8,["modelValue"]),e[50]||(e[50]=o("div",{class:"form-description"},"选择允许上传的图片格式",-1))]),_:1}),l(s,{label:"允许的视频类型"},{default:t(()=>[l(j,{modelValue:v.allowedVideoTypes,"onUpdate:modelValue":e[6]||(e[6]=n=>v.allowedVideoTypes=n)},{default:t(()=>[l(x,{label:"mp4"},{default:t(()=>[...e[51]||(e[51]=[d("MP4",-1)])]),_:1}),l(x,{label:"webm"},{default:t(()=>[...e[52]||(e[52]=[d("WebM",-1)])]),_:1}),l(x,{label:"mov"},{default:t(()=>[...e[53]||(e[53]=[d("MOV",-1)])]),_:1}),l(x,{label:"avi"},{default:t(()=>[...e[54]||(e[54]=[d("AVI",-1)])]),_:1}),l(x,{label:"mkv"},{default:t(()=>[...e[55]||(e[55]=[d("MKV",-1)])]),_:1})]),_:1},8,["modelValue"]),e[56]||(e[56]=o("div",{class:"form-description"},"选择允许上传的视频格式",-1))]),_:1}),l(s,{label:"缩略图尺寸",prop:"thumbnailSize"},{default:t(()=>[l(I,{modelValue:v.thumbnailSize,"onUpdate:modelValue":e[7]||(e[7]=n=>v.thumbnailSize=n),min:100,max:1e3,"controls-position":"right",style:{width:"200px"}},null,8,["modelValue"]),e[57]||(e[57]=o("span",{class:"form-unit"},"px",-1)),e[58]||(e[58]=o("span",{class:"form-description"},"生成缩略图的尺寸",-1))]),_:1}),l(s,null,{default:t(()=>[l(_,{type:"primary",onClick:Ie,loading:w.value},{default:t(()=>[l(m,null,{default:t(()=>[l(y(M))]),_:1}),e[59]||(e[59]=d(" 保存设置 ",-1))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])):E("",!0),S.value==="security"?(V(),C("div",Vl,[e[71]||(e[71]=o("div",{class:"section-header"},[o("h3",null,"安全设置"),o("p",null,"配置系统安全相关参数")],-1)),l(k,{model:f,rules:Ve,ref_key:"securityFormRef",ref:h,"label-width":"120px",class:"settings-form"},{default:t(()=>[l(s,{label:"密码最小长度",prop:"minPasswordLength"},{default:t(()=>[l(I,{modelValue:f.minPasswordLength,"onUpdate:modelValue":e[8]||(e[8]=n=>f.minPasswordLength=n),min:6,max:20,"controls-position":"right",style:{width:"200px"}},null,8,["modelValue"]),e[61]||(e[61]=o("span",{class:"form-unit"},"位",-1)),e[62]||(e[62]=o("span",{class:"form-description"},"用户密码的最小长度要求",-1))]),_:1}),l(s,{label:"登录失败锁定"},{default:t(()=>[l(U,{modelValue:f.enableLoginLock,"onUpdate:modelValue":e[9]||(e[9]=n=>f.enableLoginLock=n),"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"]),e[63]||(e[63]=o("span",{class:"form-description"},"登录失败次数过多时锁定账户",-1))]),_:1}),f.enableLoginLock?(V(),P(s,{key:0,label:"最大失败次数",prop:"maxLoginAttempts"},{default:t(()=>[l(I,{modelValue:f.maxLoginAttempts,"onUpdate:modelValue":e[10]||(e[10]=n=>f.maxLoginAttempts=n),min:3,max:10,"controls-position":"right",style:{width:"200px"}},null,8,["modelValue"]),e[64]||(e[64]=o("span",{class:"form-unit"},"次",-1)),e[65]||(e[65]=o("span",{class:"form-description"},"达到此次数后锁定账户",-1))]),_:1})):E("",!0),f.enableLoginLock?(V(),P(s,{key:1,label:"锁定时间",prop:"lockoutDuration"},{default:t(()=>[l(I,{modelValue:f.lockoutDuration,"onUpdate:modelValue":e[11]||(e[11]=n=>f.lockoutDuration=n),min:5,max:60,"controls-position":"right",style:{width:"200px"}},null,8,["modelValue"]),e[66]||(e[66]=o("span",{class:"form-unit"},"分钟",-1)),e[67]||(e[67]=o("span",{class:"form-description"},"账户锁定的持续时间",-1))]),_:1})):E("",!0),l(s,{label:"会话超时时间",prop:"sessionTimeout"},{default:t(()=>[l(I,{modelValue:f.sessionTimeout,"onUpdate:modelValue":e[12]||(e[12]=n=>f.sessionTimeout=n),min:30,max:1440,"controls-position":"right",style:{width:"200px"}},null,8,["modelValue"]),e[68]||(e[68]=o("span",{class:"form-unit"},"分钟",-1)),e[69]||(e[69]=o("span",{class:"form-description"},"用户会话的超时时间",-1))]),_:1}),l(s,null,{default:t(()=>[l(_,{type:"primary",onClick:Se,loading:w.value},{default:t(()=>[l(m,null,{default:t(()=>[l(y(M))]),_:1}),e[70]||(e[70]=d(" 保存设置 ",-1))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])):E("",!0),S.value==="notification"?(V(),C("div",xl,[e[75]||(e[75]=o("div",{class:"section-header"},[o("h3",null,"通知设置"),o("p",null,"配置系统通知相关参数")],-1)),l(k,{model:u,ref_key:"notificationFormRef",ref:we,"label-width":"120px",class:"settings-form"},{default:t(()=>[l(s,{label:"邮件通知"},{default:t(()=>[l(U,{modelValue:u.enableEmailNotification,"onUpdate:modelValue":e[13]||(e[13]=n=>u.enableEmailNotification=n),"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"]),e[72]||(e[72]=o("span",{class:"form-description"},"是否启用邮件通知功能",-1))]),_:1}),u.enableEmailNotification?(V(),P(s,{key:0,label:"SMTP服务器",prop:"smtpHost"},{default:t(()=>[l(c,{modelValue:u.smtpHost,"onUpdate:modelValue":e[14]||(e[14]=n=>u.smtpHost=n),placeholder:"请输入SMTP服务器地址"},null,8,["modelValue"])]),_:1})):E("",!0),u.enableEmailNotification?(V(),P(s,{key:1,label:"SMTP端口",prop:"smtpPort"},{default:t(()=>[l(I,{modelValue:u.smtpPort,"onUpdate:modelValue":e[15]||(e[15]=n=>u.smtpPort=n),min:1,max:65535,"controls-position":"right",style:{width:"200px"}},null,8,["modelValue"])]),_:1})):E("",!0),u.enableEmailNotification?(V(),P(s,{key:2,label:"发件人邮箱",prop:"senderEmail"},{default:t(()=>[l(c,{modelValue:u.senderEmail,"onUpdate:modelValue":e[16]||(e[16]=n=>u.senderEmail=n),placeholder:"请输入发件人邮箱"},null,8,["modelValue"])]),_:1})):E("",!0),l(s,{label:"系统通知"},{default:t(()=>[l(U,{modelValue:u.enableSystemNotification,"onUpdate:modelValue":e[17]||(e[17]=n=>u.enableSystemNotification=n),"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"]),e[73]||(e[73]=o("span",{class:"form-description"},"是否在系统内显示通知",-1))]),_:1}),l(s,null,{default:t(()=>[l(_,{type:"primary",onClick:Ae,loading:w.value},{default:t(()=>[l(m,null,{default:t(()=>[l(y(M))]),_:1}),e[74]||(e[74]=d(" 保存设置 ",-1))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])):E("",!0),S.value==="appearance"?(V(),C("div",El,[e[85]||(e[85]=o("div",{class:"section-header"},[o("h3",null,"外观设置"),o("p",null,"配置系统界面外观")],-1)),l(k,{model:g,ref_key:"appearanceFormRef",ref:qe,"label-width":"120px",class:"settings-form"},{default:t(()=>[l(s,{label:"主题模式"},{default:t(()=>[l(H,{modelValue:g.themeMode,"onUpdate:modelValue":e[18]||(e[18]=n=>g.themeMode=n)},{default:t(()=>[l(D,{label:"light"},{default:t(()=>[...e[76]||(e[76]=[d("浅色模式",-1)])]),_:1}),l(D,{label:"dark"},{default:t(()=>[...e[77]||(e[77]=[d("深色模式",-1)])]),_:1}),l(D,{label:"auto"},{default:t(()=>[...e[78]||(e[78]=[d("跟随系统",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"主色调"},{default:t(()=>[l(O,{modelValue:g.primaryColor,"onUpdate:modelValue":e[19]||(e[19]=n=>g.primaryColor=n)},null,8,["modelValue"]),e[79]||(e[79]=o("span",{class:"form-description"},"系统的主色调",-1))]),_:1}),l(s,{label:"侧边栏宽度"},{default:t(()=>[l($,{modelValue:g.sidebarWidth,"onUpdate:modelValue":e[20]||(e[20]=n=>g.sidebarWidth=n),min:200,max:300,"show-input":"",style:{width:"300px"}},null,8,["modelValue"]),e[80]||(e[80]=o("span",{class:"form-description"},"侧边栏的宽度",-1))]),_:1}),l(s,{label:"页面动画"},{default:t(()=>[l(U,{modelValue:g.enableAnimation,"onUpdate:modelValue":e[21]||(e[21]=n=>g.enableAnimation=n),"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"]),e[81]||(e[81]=o("span",{class:"form-description"},"是否启用页面切换动画",-1))]),_:1}),l(s,{label:"系统Logo"},{default:t(()=>[l(c,{modelValue:g.logoUrl,"onUpdate:modelValue":e[22]||(e[22]=n=>g.logoUrl=n),placeholder:"请输入Logo URL",clearable:""},null,8,["modelValue"]),e[82]||(e[82]=o("span",{class:"form-description"},"系统Logo的URL地址",-1))]),_:1}),l(s,{label:"网站图标"},{default:t(()=>[l(c,{modelValue:g.faviconUrl,"onUpdate:modelValue":e[23]||(e[23]=n=>g.faviconUrl=n),placeholder:"请输入Favicon URL",clearable:""},null,8,["modelValue"]),e[83]||(e[83]=o("span",{class:"form-description"},"网站图标的URL地址",-1))]),_:1}),l(s,null,{default:t(()=>[l(_,{type:"primary",onClick:ke,loading:w.value},{default:t(()=>[l(m,null,{default:t(()=>[l(y(M))]),_:1}),e[84]||(e[84]=d(" 保存设置 ",-1))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])):E("",!0),S.value==="integration"?(V(),C("div",Ll,[e[106]||(e[106]=o("div",{class:"section-header"},[o("h3",null,"第三方集成"),o("p",null,"配置第三方登录和集成服务")],-1)),l(k,{model:a,ref_key:"integrationFormRef",ref:ee,"label-width":"140px",class:"settings-form"},{default:t(()=>[l(R,{"content-position":"left"},{default:t(()=>[l(m,null,{default:t(()=>[l(y(W))]),_:1}),e[86]||(e[86]=d(" QQ登录集成 ",-1))]),_:1}),l(s,{label:"启用QQ登录"},{default:t(()=>[l(U,{modelValue:a.qqLoginEnabled,"onUpdate:modelValue":e[24]||(e[24]=n=>a.qqLoginEnabled=n),"active-text":"开启","inactive-text":"关闭",onChange:Qe},null,8,["modelValue"]),e[87]||(e[87]=o("span",{class:"form-description"},"允许用户使用QQ账号登录系统",-1))]),_:1}),l(s,{label:"QQ应用ID",prop:"qqAppId",rules:[{required:a.qqLoginEnabled,message:"QQ应用ID不能为空",trigger:"blur"}]},{default:t(()=>[l(c,{modelValue:a.qqAppId,"onUpdate:modelValue":e[25]||(e[25]=n=>a.qqAppId=n),placeholder:"请输入QQ应用ID",disabled:!a.qqLoginEnabled,clearable:""},null,8,["modelValue","disabled"]),o("div",Il,[l(B,{type:"primary",href:"https://connect.qq.com/",target:"_blank"},{default:t(()=>[...e[88]||(e[88]=[d(" 获取QQ应用ID ",-1)])]),_:1})])]),_:1},8,["rules"]),l(s,{label:"QQ应用密钥",prop:"qqAppKey",rules:[{required:a.qqLoginEnabled,message:"QQ应用密钥不能为空",trigger:"blur"}]},{default:t(()=>[l(c,{modelValue:a.qqAppKey,"onUpdate:modelValue":e[26]||(e[26]=n=>a.qqAppKey=n),type:"password",placeholder:"请输入QQ应用密钥",disabled:!a.qqLoginEnabled,"show-password":"",clearable:""},null,8,["modelValue","disabled"]),e[89]||(e[89]=o("div",{class:"form-description"},"QQ应用的密钥，用于验证应用身份",-1))]),_:1},8,["rules"]),a.qqLoginEnabled?(V(),P(s,{key:0},{default:t(()=>[l(K,{title:"QQ登录配置说明",type:"info",closable:!1,"show-icon":""},{default:t(()=>[e[91]||(e[91]=o("p",null,"1. 在QQ互联平台创建应用并获取App ID和App Key",-1)),o("p",null,[e[90]||(e[90]=d("2. 设置回调地址为：",-1)),o("code",null,ae(ne("qq")),1)]),e[92]||(e[92]=o("p",null,'3. 确保应用状态为"已上线"',-1))]),_:1})]),_:1})):E("",!0),l(R,{"content-position":"left"},{default:t(()=>[l(m,null,{default:t(()=>[l(y(W))]),_:1}),e[93]||(e[93]=d(" 微信登录集成 ",-1))]),_:1}),l(s,{label:"启用微信登录"},{default:t(()=>[l(U,{modelValue:a.wechatLoginEnabled,"onUpdate:modelValue":e[27]||(e[27]=n=>a.wechatLoginEnabled=n),"active-text":"开启","inactive-text":"关闭",onChange:Fe},null,8,["modelValue"]),e[94]||(e[94]=o("span",{class:"form-description"},"允许用户使用微信账号登录系统",-1))]),_:1}),l(s,{label:"微信应用ID",prop:"wechatAppId",rules:[{required:a.wechatLoginEnabled,message:"微信应用ID不能为空",trigger:"blur"}]},{default:t(()=>[l(c,{modelValue:a.wechatAppId,"onUpdate:modelValue":e[28]||(e[28]=n=>a.wechatAppId=n),placeholder:"请输入微信应用ID",disabled:!a.wechatLoginEnabled,clearable:""},null,8,["modelValue","disabled"]),o("div",Sl,[l(B,{type:"primary",href:"https://developers.weixin.qq.com/",target:"_blank"},{default:t(()=>[...e[95]||(e[95]=[d(" 获取微信应用ID ",-1)])]),_:1})])]),_:1},8,["rules"]),l(s,{label:"微信应用密钥",prop:"wechatAppSecret",rules:[{required:a.wechatLoginEnabled,message:"微信应用密钥不能为空",trigger:"blur"}]},{default:t(()=>[l(c,{modelValue:a.wechatAppSecret,"onUpdate:modelValue":e[29]||(e[29]=n=>a.wechatAppSecret=n),type:"password",placeholder:"请输入微信应用密钥",disabled:!a.wechatLoginEnabled,"show-password":"",clearable:""},null,8,["modelValue","disabled"]),e[96]||(e[96]=o("div",{class:"form-description"},"微信应用的密钥，用于验证应用身份",-1))]),_:1},8,["rules"]),a.wechatLoginEnabled?(V(),P(s,{key:1},{default:t(()=>[l(K,{title:"微信登录配置说明",type:"info",closable:!1,"show-icon":""},{default:t(()=>[e[98]||(e[98]=o("p",null,"1. 在微信开放平台创建网站应用",-1)),o("p",null,[e[97]||(e[97]=d("2. 设置回调地址为：",-1)),o("code",null,ae(ne("wechat")),1)]),e[99]||(e[99]=o("p",null,"3. 确保应用已通过审核",-1))]),_:1})]),_:1})):E("",!0),l(R,{"content-position":"left"},{default:t(()=>[l(m,null,{default:t(()=>[l(y(ul))]),_:1}),e[100]||(e[100]=d(" 连接测试 ",-1))]),_:1}),l(s,{label:"测试连接"},{default:t(()=>[l(_,{type:"success",onClick:Ce,disabled:!a.qqLoginEnabled||!a.qqAppId,loading:le.value},{default:t(()=>[l(m,null,{default:t(()=>[l(y(W))]),_:1}),e[101]||(e[101]=d(" 测试QQ连接 ",-1))]),_:1},8,["disabled","loading"]),l(_,{type:"success",onClick:Ne,disabled:!a.wechatLoginEnabled||!a.wechatAppId,loading:te.value,style:{"margin-left":"12px"}},{default:t(()=>[l(m,null,{default:t(()=>[l(y(W))]),_:1}),e[102]||(e[102]=d(" 测试微信连接 ",-1))]),_:1},8,["disabled","loading"]),e[103]||(e[103]=o("div",{class:"form-description"},"测试第三方登录配置是否正确",-1))]),_:1}),l(s,null,{default:t(()=>[l(_,{type:"primary",onClick:Ue,loading:w.value,disabled:!G.value},{default:t(()=>[l(m,null,{default:t(()=>[l(y(M))]),_:1}),d(" "+ae(G.value?"保存设置":"已保存"),1)]),_:1},8,["loading","disabled"]),l(_,{onClick:Pe,style:{"margin-left":"12px"},disabled:!G.value},{default:t(()=>[l(m,null,{default:t(()=>[l(y(ye))]),_:1}),e[104]||(e[104]=d(" 重置 ",-1))]),_:1},8,["disabled"]),G.value?(V(),C("div",Al,[l(m,null,{default:t(()=>[l(y(pl))]),_:1}),e[105]||(e[105]=d(" 检测到未保存的更改 ",-1))])):E("",!0)]),_:1})]),_:1},8,["model"])])):E("",!0)]),_:1})]),_:1})]),_:1})])])}}}),Jl=De(kl,[["__scopeId","data-v-91dd5889"]]);export{Jl as default};
