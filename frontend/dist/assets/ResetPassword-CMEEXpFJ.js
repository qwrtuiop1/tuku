import{_ as F}from"./_plugin-vue_export-helper-BwE83l92.js";/* empty css                */import"./el-form-item-l0sNRNKZ.js";/* empty css                 */import{y as I,c as N,r as h,l as S,j as z,aD as K,aC as M,z as T,B as e,aB as q,R as o,J as a,W as A,O as d,al as P,A as k,u as r,a4 as D,I as L,L as U,P as W}from"./vendor-BcB6VvZI.js";import{E as v,b as j,c as J,d as O,p as G,g as x,l as u,e as H,f as Q,r as X,x as Y}from"./element-DeM_tGLH.js";import{u as Z}from"./index-y9EwNwgf.js";const $={class:"reset-password-container"},ss={class:"top-nav"},es={class:"nav-content"},os={class:"nav-logo"},ts={class:"nav-actions"},as={class:"reset-password-content"},rs={class:"reset-password-box"},ns={class:"reset-password-header"},ls={class:"header-icon"},is={class:"reset-password-footer"},ds={class:"login-link"},us={class:"info-panel"},cs={class:"panel-content"},ps={class:"security-list"},fs={class:"security-item"},_s={class:"security-item"},ms={class:"security-item"},vs=I({__name:"ResetPassword",setup(ws){const c=M(),w=K(),E=Z();N(()=>window.innerWidth<=768);const p=h(),n=S({password:"",confirmPassword:""}),i=h(!1),V={password:[{validator:(l,s,t)=>{s?s.length<6?t(new Error("密码长度不能少于6位")):t():t(new Error("请输入新密码"))},trigger:"blur"}],confirmPassword:[{validator:(l,s,t)=>{s?s!==n.password?t(new Error("两次输入的密码不一致")):t():t(new Error("请确认新密码"))},trigger:"blur"}]},f=async()=>{if(p.value)try{await p.value.validate(),i.value=!0;const l=w.query.token;if(!l){v.error("重置链接无效");return}await E.resetPassword(l,n.password)&&(v.success({message:"密码重置成功！2秒后自动跳转到登录页面",duration:2e3,showClose:!1}),setTimeout(()=>{c.push("/login")},2e3))}catch{}finally{i.value=!1}},C=()=>{c.push("/login")};return z(()=>{w.query.token||(v.error("重置链接无效"),c.push("/forgot-password"))}),(l,s)=>{const t=j,g=J,y=Q,_=H,R=O,B=P("router-link"),b=P("Key");return k(),T("div",$,[e("div",ss,[e("div",es,[e("div",os,[o(t,{class:"logo-icon"},{default:a(()=>[o(r(G))]),_:1}),s[2]||(s[2]=e("span",{class:"logo-text"},"图库系统",-1))]),e("div",ts,[o(g,{type:"text",onClick:C},{default:a(()=>[o(t,null,{default:a(()=>[o(r(x))]),_:1}),s[3]||(s[3]=d(" 返回登录 ",-1))]),_:1})])])]),e("div",as,[e("div",rs,[e("div",ns,[e("div",ls,[o(t,null,{default:a(()=>[o(r(u))]),_:1})]),s[4]||(s[4]=e("h1",{class:"reset-password-title"},"重置密码",-1)),s[5]||(s[5]=e("p",{class:"reset-password-subtitle"},"请输入您的新密码",-1))]),o(R,{ref_key:"resetPasswordFormRef",ref:p,model:n,rules:V,class:"reset-password-form",onSubmit:A(f,["prevent"])},{default:a(()=>[o(_,{prop:"password"},{default:a(()=>[o(y,{modelValue:n.password,"onUpdate:modelValue":s[0]||(s[0]=m=>n.password=m),type:"password",placeholder:"请输入新密码",size:"large","prefix-icon":r(u),"show-password":"",class:"custom-input"},null,8,["modelValue","prefix-icon"])]),_:1}),o(_,{prop:"confirmPassword"},{default:a(()=>[o(y,{modelValue:n.confirmPassword,"onUpdate:modelValue":s[1]||(s[1]=m=>n.confirmPassword=m),type:"password",placeholder:"请确认新密码",size:"large","prefix-icon":r(u),"show-password":"",class:"custom-input",onKeyup:D(f,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),o(_,null,{default:a(()=>[o(g,{type:"primary",size:"large",class:"reset-password-button",loading:i.value,onClick:f},{default:a(()=>[i.value?U("",!0):(k(),L(t,{key:0},{default:a(()=>[o(r(X))]),_:1})),d(" "+W(i.value?"重置中...":"重置密码"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),e("div",is,[e("p",ds,[s[7]||(s[7]=d(" 记起密码了？ ",-1)),o(B,{to:"/login",class:"link"},{default:a(()=>[o(t,null,{default:a(()=>[o(r(x))]),_:1}),s[6]||(s[6]=d(" 返回登录 ",-1))]),_:1})])])]),e("div",us,[e("div",cs,[s[11]||(s[11]=e("h2",{class:"panel-title"},"密码安全提示",-1)),e("div",ps,[e("div",fs,[o(t,{class:"security-icon"},{default:a(()=>[o(r(u))]),_:1}),s[8]||(s[8]=e("div",{class:"security-content"},[e("h3",null,"密码强度"),e("p",null,"建议使用包含字母、数字和特殊字符的强密码")],-1))]),e("div",_s,[o(t,{class:"security-icon"},{default:a(()=>[o(b)]),_:1}),s[9]||(s[9]=e("div",{class:"security-content"},[e("h3",null,"密码长度"),e("p",null,"密码长度至少6位，建议8位以上")],-1))]),e("div",ms,[o(t,{class:"security-icon"},{default:a(()=>[o(r(Y))]),_:1}),s[10]||(s[10]=e("div",{class:"security-content"},[e("h3",null,"安全提醒"),e("p",null,"请妥善保管您的密码，不要与他人分享")],-1))])])])])]),s[12]||(s[12]=q('<div class="bg-decoration" data-v-e15e0a2e><div class="floating-shape shape-1" data-v-e15e0a2e></div><div class="floating-shape shape-2" data-v-e15e0a2e></div><div class="floating-shape shape-3" data-v-e15e0a2e></div><div class="floating-shape shape-4" data-v-e15e0a2e></div></div>',1))])}}}),Rs=F(vs,[["__scopeId","data-v-e15e0a2e"]]);export{Rs as default};
