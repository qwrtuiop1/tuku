import{_ as J}from"./_plugin-vue_export-helper-BwE83l92.js";/* empty css                *//* empty css                    */import"./el-form-item-l0sNRNKZ.js";/* empty css                 */import{y as K,c as L,r as f,l as Q,j as W,U as D,z as U,B as t,aB as G,R as s,J as a,W as H,O as n,al as X,A as x,u as o,L as I,P as V,a4 as Y,I as Z,aC as ee}from"./vendor-BcB6VvZI.js";import{b as se,c as te,d as le,p as ae,g as b,u as oe,e as ie,f as ne,o as re,l as P,h as de,r as ue,j as me,q as fe,s as ce,E as c}from"./element-BdwomdJ_.js";import{u as pe}from"./index-Cm5Vquue.js";import{i as R,a as ve}from"./helpers-iwoUo1o7.js";const _e={class:"register-container"},ge={class:"top-nav"},we={class:"nav-content"},be={class:"nav-logo"},ye={class:"nav-actions"},Ee={class:"register-content"},xe={class:"register-box"},Ve={class:"register-header"},Ce={class:"header-icon"},he={key:0,class:"email-verification-section"},ke={class:"verification-input-row"},Ue={key:0,class:"code-tips"},Ie={class:"code-timer"},Pe={class:"social-register"},Te={class:"register-footer"},ze={class:"login-link"},Be={class:"info-panel"},Re={class:"panel-content"},Se={class:"benefit-list"},Ne={class:"benefit-item"},Fe={class:"benefit-item"},je={class:"benefit-item"},$e={class:"benefit-item"},qe=K({__name:"Register",setup(Me){const T=ee(),y=pe();L(()=>window.innerWidth<=768);const C=f(),i=Q({username:"",email:"",password:"",confirmPassword:""}),h=f(!1),E=f(""),z=f(!1),r=f(0),g=f(0),p=f(null),v=f(null),S={username:[{validator:(u,e,l)=>{e?ve(e)?e.includes("@")?l(new Error("用户名不能使用邮箱格式")):l():l(new Error("用户名只能包含字母、数字和下划线，长度3-20位")):l(new Error("请输入用户名"))},trigger:"blur"}],email:[{validator:(u,e,l)=>{e?R(e)?l():l(new Error("请输入有效的邮箱地址")):l(new Error("请输入邮箱地址"))},trigger:"blur"}],password:[{validator:(u,e,l)=>{e?e.length<6?l(new Error("密码长度不能少于6位")):l():l(new Error("请输入密码"))},trigger:"blur"}],confirmPassword:[{validator:(u,e,l)=>{e?e!==i.password?l(new Error("两次输入的密码不一致")):l():l(new Error("请确认密码"))},trigger:"blur"}]},B=async()=>{if(!i.email){c.warning("请先输入邮箱地址");return}if(!R(i.email)){c.warning("请输入有效的邮箱地址");return}try{const l=await(await fetch("https://tukubackend.vtart.cn/api/auth/send-email-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i.email,type:"verify_email"})})).json();l.success?(c.success("验证码已发送到您的邮箱"),z.value=!0,F(),j()):c.error(l.message||"发送验证码失败")}catch{c.error("发送验证码失败，请稍后重试")}},N=async()=>{if(r.value>0){c.warning(`请等待 ${r.value} 秒后再试`);return}await B()},F=()=>{r.value=60,p.value=setInterval(()=>{r.value--,r.value<=0&&(clearInterval(p.value),p.value=null)},1e3)},j=()=>{g.value=300,v.value=setInterval(()=>{g.value--,g.value<=0&&(clearInterval(v.value),v.value=null)},1e3)},$=()=>{p.value&&(clearInterval(p.value),p.value=null),v.value&&(clearInterval(v.value),v.value=null)},k=async()=>{if(C.value)try{if(await C.value.validate(),!E.value){c.warning("请输入邮箱验证码");return}if(g.value<=0){c.warning("验证码已过期，请重新发送");return}await y.register({username:i.username,email:i.email,password:i.password,emailCode:E.value})&&T.push("/")}catch{}},q=()=>{T.push("/login")};return W(()=>{}),D(()=>{$()}),(u,e)=>{const l=se,m=te,w=ne,_=ie,M=de,O=le,A=X("router-link");return x(),U("div",_e,[t("div",ge,[t("div",we,[t("div",be,[s(l,{class:"logo-icon"},{default:a(()=>[s(o(ae))]),_:1}),e[6]||(e[6]=t("span",{class:"logo-text"},"图库系统",-1))]),t("div",ye,[s(m,{type:"text",onClick:q},{default:a(()=>[s(l,null,{default:a(()=>[s(o(b))]),_:1}),e[7]||(e[7]=n(" 登录 ",-1))]),_:1})])])]),t("div",Ee,[t("div",xe,[t("div",Ve,[t("div",Ce,[s(l,null,{default:a(()=>[s(o(oe))]),_:1})]),e[8]||(e[8]=t("h1",{class:"register-title"},"创建账户",-1)),e[9]||(e[9]=t("p",{class:"register-subtitle"},"注册新账户，开始您的文件管理之旅",-1))]),s(O,{ref_key:"registerFormRef",ref:C,model:i,rules:S,class:"register-form",onSubmit:H(k,["prevent"])},{default:a(()=>[s(_,{prop:"username"},{default:a(()=>[s(w,{modelValue:i.username,"onUpdate:modelValue":e[0]||(e[0]=d=>i.username=d),placeholder:"请输入用户名",size:"large","prefix-icon":o(b),clearable:"",class:"custom-input"},null,8,["modelValue","prefix-icon"])]),_:1}),s(_,{prop:"email"},{default:a(()=>[s(w,{modelValue:i.email,"onUpdate:modelValue":e[1]||(e[1]=d=>i.email=d),placeholder:"请输入邮箱地址",size:"large","prefix-icon":o(re),clearable:"",class:"custom-input"},null,8,["modelValue","prefix-icon"]),i.email?(x(),U("div",he,[t("div",ke,[s(w,{modelValue:E.value,"onUpdate:modelValue":e[2]||(e[2]=d=>E.value=d),placeholder:"请输入6位验证码",class:"email-code-input",maxlength:"6",size:"large"},null,8,["modelValue"]),s(m,{type:"primary",size:"large",disabled:r.value>0,onClick:B,class:"send-code-btn"},{default:a(()=>[n(V(r.value>0?`${r.value}s`:"发送验证码"),1)]),_:1},8,["disabled"])]),z.value?(x(),U("div",Ue,[t("span",Ie,"验证码有效期："+V(g.value)+"s",1),s(m,{type:"text",onClick:N,disabled:r.value>0},{default:a(()=>[n(V(r.value>0?`${r.value}s后重发`:"重新发送"),1)]),_:1},8,["disabled"])])):I("",!0)])):I("",!0)]),_:1}),s(_,{prop:"password"},{default:a(()=>[s(w,{modelValue:i.password,"onUpdate:modelValue":e[3]||(e[3]=d=>i.password=d),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":o(P),"show-password":"",class:"custom-input"},null,8,["modelValue","prefix-icon"])]),_:1}),s(_,{prop:"confirmPassword"},{default:a(()=>[s(w,{modelValue:i.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=d=>i.confirmPassword=d),type:"password",placeholder:"请确认密码",size:"large","prefix-icon":o(P),"show-password":"",class:"custom-input",onKeyup:Y(k,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),s(_,{class:"agreement-row"},{default:a(()=>[s(M,{modelValue:h.value,"onUpdate:modelValue":e[5]||(e[5]=d=>h.value=d),class:"agreement-checkbox"},{default:a(()=>[e[12]||(e[12]=n(" 我已阅读并同意 ",-1)),s(m,{type:"text",class:"terms-link"},{default:a(()=>[...e[10]||(e[10]=[n("《用户协议》",-1)])]),_:1}),e[13]||(e[13]=n(" 和 ",-1)),s(m,{type:"text",class:"terms-link"},{default:a(()=>[...e[11]||(e[11]=[n("《隐私政策》",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(_,null,{default:a(()=>[s(m,{type:"primary",size:"large",class:"register-button",loading:o(y).loading,disabled:!h.value,onClick:k},{default:a(()=>[o(y).loading?I("",!0):(x(),Z(l,{key:0},{default:a(()=>[s(o(ue))]),_:1})),n(" "+V(o(y).loading?"注册中...":"立即注册"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["model"]),e[18]||(e[18]=t("div",{class:"register-divider"},[t("span",{class:"divider-text"},"或")],-1)),t("div",Pe,[s(m,{class:"social-btn qq-btn"},{default:a(()=>[s(l,null,{default:a(()=>[s(o(b))]),_:1}),e[14]||(e[14]=n(" QQ注册 ",-1))]),_:1}),s(m,{class:"social-btn wechat-btn"},{default:a(()=>[s(l,null,{default:a(()=>[s(o(b))]),_:1}),e[15]||(e[15]=n(" 微信注册 ",-1))]),_:1})]),t("div",Te,[t("p",ze,[e[17]||(e[17]=n(" 已有账户？ ",-1)),s(A,{to:"/login",class:"link"},{default:a(()=>[s(l,null,{default:a(()=>[s(o(b))]),_:1}),e[16]||(e[16]=n(" 立即登录 ",-1))]),_:1})])])]),t("div",Be,[t("div",Re,[e[23]||(e[23]=t("h2",{class:"panel-title"},"加入图库系统",-1)),t("div",Se,[t("div",Ne,[s(l,{class:"benefit-icon"},{default:a(()=>[s(o(me))]),_:1}),e[19]||(e[19]=t("div",{class:"benefit-content"},[t("h3",null,"免费存储空间"),t("p",null,"注册即获得1GB免费存储空间，满足日常使用需求")],-1))]),t("div",Fe,[s(l,{class:"benefit-icon"},{default:a(()=>[s(o(fe))]),_:1}),e[20]||(e[20]=t("div",{class:"benefit-content"},[t("h3",null,"智能文件管理"),t("p",null,"自动分类整理，快速查找，让文件管理变得简单")],-1))]),t("div",je,[s(l,{class:"benefit-icon"},{default:a(()=>[s(o(ce))]),_:1}),e[21]||(e[21]=t("div",{class:"benefit-content"},[t("h3",null,"便捷分享功能"),t("p",null,"一键生成分享链接，轻松与他人分享您的文件")],-1))]),t("div",$e,[s(l,{class:"benefit-icon"},{default:a(()=>[s(o(P))]),_:1}),e[22]||(e[22]=t("div",{class:"benefit-content"},[t("h3",null,"安全保障"),t("p",null,"企业级安全防护，您的文件隐私得到充分保护")],-1))])])])])]),e[24]||(e[24]=G('<div class="bg-decoration" data-v-ec165df7><div class="floating-shape shape-1" data-v-ec165df7></div><div class="floating-shape shape-2" data-v-ec165df7></div><div class="floating-shape shape-3" data-v-ec165df7></div><div class="floating-shape shape-4" data-v-ec165df7></div></div>',1))])}}}),es=J(qe,[["__scopeId","data-v-ec165df7"]]);export{es as default};
