const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/element-_v7tGFXC.js","assets/vendor-BcB6VvZI.js"])))=>i.map(i=>d[i]);
import{a as F,_ as Le}from"./index-CbGLUEpg.js";import{_ as Xe}from"./_plugin-vue_export-helper-BwE83l92.js";/* empty css               *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                   *//* empty css                  *//* empty css                 *//* empty css                        *//* empty css                       *//* empty css                  *//* empty css                    *//* empty css                */import"./el-form-item-l0sNRNKZ.js";/* empty css                *//* empty css                     */import{c as Ye,aq as Ze,b as he,C as Se,ar as el,y as ll,F as tl,M as al,O as nl,q as ol,l as sl,aO as il,aP as rl,aQ as $,z as ie,d as dl,e as ul,f as pl,w as T,aE as ml,aF as gl,h as fl,aD as bl,aK as yl,aL as vl,aR as cl,al as wl,aC as _l,aS as ql,af as Vl,aM as xl,au as kl,av as El,E as u}from"./element-_v7tGFXC.js";import{y as Ll,r as L,l as P,c as Sl,j as Il,z as C,B as a,R as l,J as t,A as q,O as p,u as c,L as V,I as Q,P as re}from"./vendor-BcB6VvZI.js";const Al={class:"settings-page"},Ul={class:"page-header"},Fl={class:"header-content"},Ql={class:"header-actions"},Ml={class:"settings-content"},Cl={key:0,class:"settings-section"},Dl={key:1,class:"settings-section"},Rl={key:2,class:"settings-section"},Tl={key:3,class:"settings-section"},Pl={key:4,class:"settings-section"},Nl={key:5,class:"settings-section integration-section"},zl={class:"form-description"},Bl={class:"form-description"},jl={key:0,class:"form-description",style:{"margin-top":"8px",color:"#e6a23c"}},Kl={key:6,class:"settings-section"},Wl=Ll({__name:"SettingsPage",setup(Gl){const h=L(!1),w=L(!1),A=L("general"),ee=L(),le=L(),te=L(),Ie=L(),Ae=L(),ae=L(),ne=L(),oe=L(!1),se=L(!1),M=P({systemName:"",systemDescription:""}),_=P({maxFileSize:100,maxUploadFiles:10,allowedImageTypes:["jpg","jpeg","png","gif","webp"],allowedVideoTypes:["mp4","webm","mov"],thumbnailSize:300}),y=P({minPasswordLength:6,enableLoginLock:!0,maxLoginAttempts:5,lockoutDuration:15,sessionTimeout:120}),g=P({enableEmailNotification:!1,smtpHost:"",smtpPort:587,smtpUsername:"",smtpPassword:"",senderEmail:"",senderName:"图库系统",enableSystemNotification:!0}),b=P({themeMode:"light",primaryColor:"#409EFF",sidebarWidth:240,enableAnimation:!0,logoUrl:"/logo.png",faviconUrl:"/logo.png"}),o=P({qqLoginEnabled:!1,qqAppId:"",qqAppKey:"",wechatLoginEnabled:!1,wechatAppId:"",wechatAppSecret:""}),f=P({maintenanceMode:!1,maintenanceMessage:"",backupEnabled:!1,backupFrequency:"daily",backupRetentionDays:30,autoCleanLogs:!1}),N=L({qqLoginEnabled:!1,wechatLoginEnabled:!1,qqAppId:"",wechatAppId:""}),H=Sl(()=>o.qqLoginEnabled!==N.value.qqLoginEnabled||o.wechatLoginEnabled!==N.value.wechatLoginEnabled||o.qqAppId!==N.value.qqAppId||o.wechatAppId!==N.value.wechatAppId),Ue={systemName:[{required:!0,message:"请输入系统名称",trigger:"blur"},{max:50,message:"系统名称长度不能超过 50 个字符",trigger:"blur"}],systemDescription:[{max:200,message:"系统描述长度不能超过 200 个字符",trigger:"blur"}]},Fe={maxFileSize:[{required:!0,message:"请输入最大文件大小",trigger:"blur"}],maxUploadFiles:[{required:!0,message:"请输入最大上传文件数",trigger:"blur"}],thumbnailSize:[{required:!0,message:"请输入缩略图尺寸",trigger:"blur"}]},Qe={minPasswordLength:[{required:!0,message:"请输入密码最小长度",trigger:"blur"}],maxLoginAttempts:[{required:!0,message:"请输入最大失败次数",trigger:"blur"}],lockoutDuration:[{required:!0,message:"请输入锁定时间",trigger:"blur"}],sessionTimeout:[{required:!0,message:"请输入会话超时时间",trigger:"blur"}]},Me={maintenanceMessage:[{max:500,message:"维护消息不能超过500个字符",trigger:"blur"}],backupFrequency:[{required:!0,message:"请选择备份频率",trigger:"change"}],backupRetentionDays:[{required:!0,message:"请输入备份保留天数",trigger:"blur"},{type:"number",min:1,max:365,message:"备份保留天数必须在1-365天之间",trigger:"blur"}]},Ce=i=>{A.value=i},De=async()=>{h.value=!0;try{await de(),u.success("设置已刷新")}catch{u.error("刷新设置失败")}finally{h.value=!1}},de=async()=>{var i,e,d,v,m,x,D,R,k,s,U,S,E,K,I,z,O,J,X,B,W,G,j,Y,Z,n,pe,me,ge,fe,be,ye,ve,ce,we,_e,qe,Ve,xe,ke;try{const r=(await F.get("/admin/settings")).data.settings;M.systemName=((i=r.system_name)==null?void 0:i.value)||"图库系统",M.systemDescription=((e=r.system_description)==null?void 0:e.value)||"",_.maxFileSize=parseInt((d=r.max_file_size)==null?void 0:d.value)||100,_.maxUploadFiles=parseInt((v=r.max_upload_files)==null?void 0:v.value)||10,_.allowedImageTypes=((x=(m=r.allowed_image_types)==null?void 0:m.value)==null?void 0:x.split(","))||["jpg","jpeg","png","gif","webp"],_.allowedVideoTypes=((R=(D=r.allowed_video_types)==null?void 0:D.value)==null?void 0:R.split(","))||["mp4","webm","mov"],_.thumbnailSize=parseInt((k=r.thumbnail_size)==null?void 0:k.value)||300,y.minPasswordLength=parseInt((s=r.min_password_length)==null?void 0:s.value)||6,y.enableLoginLock=((U=r.enable_login_lock)==null?void 0:U.value)==="true",y.maxLoginAttempts=parseInt((S=r.max_login_attempts)==null?void 0:S.value)||5,y.lockoutDuration=parseInt((E=r.lockout_duration)==null?void 0:E.value)||15,y.sessionTimeout=parseInt((K=r.session_timeout)==null?void 0:K.value)||120,g.enableEmailNotification=((I=r.enable_email_notification)==null?void 0:I.value)==="true",g.smtpHost=((z=r.smtp_host)==null?void 0:z.value)||"",g.smtpPort=parseInt((O=r.smtp_port)==null?void 0:O.value)||587,g.smtpUsername=((J=r.smtp_username)==null?void 0:J.value)||"",g.smtpPassword=((X=r.smtp_password)==null?void 0:X.value)||"",g.senderEmail=((B=r.sender_email)==null?void 0:B.value)||"",g.senderName=((W=r.sender_name)==null?void 0:W.value)||"图库系统",g.enableSystemNotification=((G=r.enable_system_notification)==null?void 0:G.value)==="true",b.themeMode=((j=r.theme_mode)==null?void 0:j.value)||"light",b.primaryColor=((Y=r.primary_color)==null?void 0:Y.value)||"#409EFF",b.sidebarWidth=parseInt((Z=r.sidebar_width)==null?void 0:Z.value)||240,b.enableAnimation=((n=r.enable_animation)==null?void 0:n.value)==="true",b.logoUrl=((pe=r.logo_url)==null?void 0:pe.value)||"/logo.png",b.faviconUrl=((me=r.favicon_url)==null?void 0:me.value)||"/logo.png",o.qqLoginEnabled=((ge=r.qq_login_enabled)==null?void 0:ge.value)==="true",o.qqAppId=((fe=r.qq_app_id)==null?void 0:fe.value)||"",o.qqAppKey=((be=r.qq_app_key)==null?void 0:be.value)||"",o.wechatLoginEnabled=((ye=r.wechat_login_enabled)==null?void 0:ye.value)==="true",o.wechatAppId=((ve=r.wechat_app_id)==null?void 0:ve.value)||"",o.wechatAppSecret=((ce=r.wechat_app_secret)==null?void 0:ce.value)||"",f.maintenanceMode=((we=r.maintenance_mode)==null?void 0:we.value)==="true",f.maintenanceMessage=((_e=r.maintenance_message)==null?void 0:_e.value)||"",f.backupEnabled=((qe=r.backup_enabled)==null?void 0:qe.value)==="true",f.backupFrequency=((Ve=r.backup_frequency)==null?void 0:Ve.value)||"daily",f.backupRetentionDays=parseInt((xe=r.backup_retention_days)==null?void 0:xe.value)||30,f.autoCleanLogs=((ke=r.auto_clean_logs)==null?void 0:ke.value)==="true",N.value={qqLoginEnabled:o.qqLoginEnabled,wechatLoginEnabled:o.wechatLoginEnabled,qqAppId:o.qqAppId,wechatAppId:o.wechatAppId}}catch(Ee){throw Ee}},Re=async()=>{if(ee.value)try{await ee.value.validate(),w.value=!0;const i={system_name:M.systemName,system_description:M.systemDescription};await F.put("/admin/settings",{settings:i}),u.success("常规设置保存成功")}catch{u.error("保存常规设置失败")}finally{w.value=!1}},Te=async()=>{if(le.value)try{await le.value.validate(),w.value=!0;const i={max_file_size:_.maxFileSize.toString(),max_upload_files:_.maxUploadFiles.toString(),allowed_image_types:_.allowedImageTypes.join(","),allowed_video_types:_.allowedVideoTypes.join(","),thumbnail_size:_.thumbnailSize.toString()};await F.put("/admin/settings",{settings:i}),u.success("存储设置保存成功")}catch{u.error("保存存储设置失败")}finally{w.value=!1}},Pe=async()=>{var i,e,d,v;if(te.value)try{await te.value.validate(),w.value=!0;const m={min_password_length:y.minPasswordLength.toString(),enable_login_lock:y.enableLoginLock.toString(),max_login_attempts:y.maxLoginAttempts.toString(),lockout_duration:y.lockoutDuration.toString(),session_timeout:y.sessionTimeout.toString()};await F.put("/admin/settings",{settings:m}),u.success("安全设置保存成功")}catch(m){(e=(i=m.response)==null?void 0:i.data)!=null&&e.message?u.error(`保存失败: ${m.response.data.message}`):(v=(d=m.response)==null?void 0:d.data)!=null&&v.errors?u.error(`验证失败: ${m.response.data.errors.join(", ")}`):u.error("保存安全设置失败，请检查网络连接")}finally{w.value=!1}},Ne=async()=>{try{w.value=!0;const i={enable_email_notification:g.enableEmailNotification.toString(),smtp_host:g.smtpHost,smtp_port:g.smtpPort.toString(),smtp_username:g.smtpUsername,smtp_password:g.smtpPassword,sender_email:g.senderEmail,sender_name:g.senderName,enable_system_notification:g.enableSystemNotification.toString()};await F.put("/admin/settings",{settings:i}),u.success("通知设置保存成功")}catch{u.error("保存通知设置失败")}finally{w.value=!1}},ze=async()=>{try{w.value=!0;const i={theme_mode:b.themeMode,primary_color:b.primaryColor,sidebar_width:b.sidebarWidth.toString(),enable_animation:b.enableAnimation.toString(),logo_url:b.logoUrl,favicon_url:b.faviconUrl};await F.put("/admin/settings",{settings:i}),u.success("外观设置保存成功")}catch{u.error("保存外观设置失败")}finally{w.value=!1}},Be=async()=>{var i,e,d,v;if(ae.value)try{await ae.value.validate();const m=[];if(o.qqLoginEnabled&&m.push("QQ登录"),o.wechatLoginEnabled&&m.push("微信登录"),m.length>0){const{ElMessageBox:R}=await Le(async()=>{const{ElMessageBox:k}=await import("./element-_v7tGFXC.js").then(s=>s.aT);return{ElMessageBox:k}},__vite__mapDeps([0,1]));await R.confirm(`确定要启用 ${m.join("、")} 吗？

启用后用户将可以使用这些第三方账号登录系统。`,"确认启用第三方登录",{confirmButtonText:"确定启用",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!1})}w.value=!0;const x={qq_login_enabled:o.qqLoginEnabled.toString(),wechat_login_enabled:o.wechatLoginEnabled.toString()};o.qqLoginEnabled?(x.qq_app_id=o.qqAppId,x.qq_app_key=o.qqAppKey):(x.qq_app_id="",x.qq_app_key=""),o.wechatLoginEnabled?(x.wechat_app_id=o.wechatAppId,x.wechat_app_secret=o.wechatAppSecret):(x.wechat_app_id="",x.wechat_app_secret=""),console.log("保存第三方集成设置:",x);const D=await F.put("/admin/settings",{settings:x});D.data.success!==!1?(u.success("第三方集成设置保存成功"),N.value={qqLoginEnabled:o.qqLoginEnabled,wechatLoginEnabled:o.wechatLoginEnabled,qqAppId:o.qqAppId,wechatAppId:o.wechatAppId},m.length>0?u.info(`已启用: ${m.join("、")}`):u.info("所有第三方登录服务已禁用")):u.error(D.data.message||"保存第三方集成设置失败")}catch(m){if(console.error("保存第三方集成设置失败:",m),m==="cancel")return;if((e=(i=m.response)==null?void 0:i.data)!=null&&e.errors){const x=m.response.data.errors;u.error(`设置验证失败: ${x.join(", ")}`)}else(v=(d=m.response)==null?void 0:d.data)!=null&&v.message?u.error(m.response.data.message):u.error("保存第三方集成设置失败，请检查网络连接")}finally{w.value=!1}},je=i=>{i||(o.qqAppId="",o.qqAppKey="")},Ke=i=>{i||(o.wechatAppId="",o.wechatAppSecret="")},ue=i=>`${window.location.origin}/api/auth/${i}/callback`,We=async()=>{if(!o.qqAppId){u.warning("请先填写QQ应用ID");return}oe.value=!0;try{const i=await F.post("/admin/test-connection",{type:"qq",appId:o.qqAppId,appKey:o.qqAppKey});i.data.success?u.success("QQ连接测试成功"):u.error(i.data.message||"QQ连接测试失败")}catch{u.error("QQ连接测试失败，请检查配置")}finally{oe.value=!1}},Ge=async()=>{if(!o.wechatAppId){u.warning("请先填写微信应用ID");return}se.value=!0;try{const i=await F.post("/admin/test-connection",{type:"wechat",appId:o.wechatAppId,appSecret:o.wechatAppSecret});i.data.success?u.success("微信连接测试成功"):u.error(i.data.message||"微信连接测试失败")}catch{u.error("微信连接测试失败，请检查配置")}finally{se.value=!1}},$e=i=>{i&&u.warning("开启维护模式后，非管理员用户将无法访问系统")},He=async()=>{if(ne.value)try{await ne.value.validate(),w.value=!0;const i={maintenance_mode:f.maintenanceMode.toString(),maintenance_message:f.maintenanceMessage,backup_enabled:f.backupEnabled.toString(),backup_frequency:f.backupFrequency,backup_retention_days:f.backupRetentionDays.toString(),auto_clean_logs:f.autoCleanLogs.toString()};await F.put("/admin/settings",{settings:i}),u.success("维护设置保存成功")}catch{u.error("保存维护设置失败")}finally{w.value=!1}},Oe=async()=>{try{const{ElMessageBox:i}=await Le(async()=>{const{ElMessageBox:d}=await import("./element-_v7tGFXC.js").then(v=>v.aT);return{ElMessageBox:d}},__vite__mapDeps([0,1]));await i.confirm("测试维护模式将模拟非管理员用户的访问体验。确定要继续吗？","测试维护模式",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const e=`${window.location.origin}/maintenance`;window.open(e,"_blank"),u.success("已在新窗口中打开维护页面")}catch{}},Je=()=>{o.qqLoginEnabled=!1,o.qqAppId="",o.qqAppKey="",o.wechatLoginEnabled=!1,o.wechatAppId="",o.wechatAppSecret="",u.info("第三方集成设置已重置")};return Il(()=>{de()}),(i,e)=>{const d=he,v=Ye,m=al,x=tl,D=ll,R=el,k=pl,s=ul,U=dl,S=ml,E=fl,K=gl,I=bl,z=vl,O=yl,J=cl,X=wl,B=_l,W=ql,G=Vl,j=El,Y=kl,Z=Ze;return q(),C("div",Al,[a("div",Ul,[a("div",Fl,[e[37]||(e[37]=a("div",{class:"header-left"},[a("h1",{class:"page-title"},"系统设置"),a("p",{class:"page-subtitle"},"配置系统参数和功能选项")],-1)),a("div",Ql,[l(v,{onClick:De,loading:h.value},{default:t(()=>[l(d,null,{default:t(()=>[l(c(Se))]),_:1}),e[36]||(e[36]=p(" 刷新 ",-1))]),_:1},8,["loading"])])])]),a("div",Ml,[l(Z,{gutter:24},{default:t(()=>[l(R,{xs:24,sm:6,md:6,lg:6,xl:6},{default:t(()=>[l(D,{class:"settings-nav-card"},{default:t(()=>[l(x,{modelValue:A.value,"onUpdate:modelValue":e[0]||(e[0]=n=>A.value=n),class:"settings-menu",onSelect:Ce},{default:t(()=>[l(m,{index:"general"},{default:t(()=>[l(d,null,{default:t(()=>[l(c(nl))]),_:1}),e[38]||(e[38]=a("span",null,"常规设置",-1))]),_:1}),l(m,{index:"storage"},{default:t(()=>[l(d,null,{default:t(()=>[l(c(ol))]),_:1}),e[39]||(e[39]=a("span",null,"存储设置",-1))]),_:1}),l(m,{index:"security"},{default:t(()=>[l(d,null,{default:t(()=>[l(c(sl))]),_:1}),e[40]||(e[40]=a("span",null,"安全设置",-1))]),_:1}),l(m,{index:"notification"},{default:t(()=>[l(d,null,{default:t(()=>[l(c(il))]),_:1}),e[41]||(e[41]=a("span",null,"通知设置",-1))]),_:1}),l(m,{index:"appearance"},{default:t(()=>[l(d,null,{default:t(()=>[l(c(rl))]),_:1}),e[42]||(e[42]=a("span",null,"外观设置",-1))]),_:1}),l(m,{index:"integration"},{default:t(()=>[l(d,null,{default:t(()=>[l(c($))]),_:1}),e[43]||(e[43]=a("span",null,"第三方集成",-1))]),_:1}),l(m,{index:"maintenance"},{default:t(()=>[l(d,null,{default:t(()=>[l(c(ie))]),_:1}),e[44]||(e[44]=a("span",null,"维护设置",-1))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(R,{xs:24,sm:18,md:18,lg:18,xl:18},{default:t(()=>[l(D,{class:"settings-panel-card"},{default:t(()=>[A.value==="general"?(q(),C("div",Cl,[e[46]||(e[46]=a("div",{class:"section-header"},[a("h3",null,"常规设置"),a("p",null,"配置系统基本参数")],-1)),l(U,{model:M,rules:Ue,ref_key:"generalFormRef",ref:ee,"label-width":"120px",class:"settings-form"},{default:t(()=>[l(s,{label:"系统名称",prop:"systemName"},{default:t(()=>[l(k,{modelValue:M.systemName,"onUpdate:modelValue":e[1]||(e[1]=n=>M.systemName=n),placeholder:"请输入系统名称"},null,8,["modelValue"])]),_:1}),l(s,{label:"系统描述",prop:"systemDescription"},{default:t(()=>[l(k,{modelValue:M.systemDescription,"onUpdate:modelValue":e[2]||(e[2]=n=>M.systemDescription=n),type:"textarea",rows:3,placeholder:"请输入系统描述"},null,8,["modelValue"])]),_:1}),l(s,null,{default:t(()=>[l(v,{type:"primary",onClick:Re,loading:w.value},{default:t(()=>[l(d,null,{default:t(()=>[l(c(T))]),_:1}),e[45]||(e[45]=p(" 保存设置 ",-1))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])):V("",!0),A.value==="storage"?(q(),C("div",Dl,[e[67]||(e[67]=a("div",{class:"section-header"},[a("h3",null,"存储设置"),a("p",null,"配置文件存储相关参数")],-1)),l(U,{model:_,rules:Fe,ref_key:"storageFormRef",ref:le,"label-width":"120px",class:"settings-form"},{default:t(()=>[l(s,{label:"最大文件大小",prop:"maxFileSize"},{default:t(()=>[l(S,{modelValue:_.maxFileSize,"onUpdate:modelValue":e[3]||(e[3]=n=>_.maxFileSize=n),min:1,max:1e3,"controls-position":"right",style:{width:"200px"}},null,8,["modelValue"]),e[47]||(e[47]=a("span",{class:"form-unit"},"MB",-1)),e[48]||(e[48]=a("span",{class:"form-description"},"单个文件上传的最大大小限制",-1))]),_:1}),l(s,{label:"单次上传文件数",prop:"maxUploadFiles"},{default:t(()=>[l(S,{modelValue:_.maxUploadFiles,"onUpdate:modelValue":e[4]||(e[4]=n=>_.maxUploadFiles=n),min:1,max:50,"controls-position":"right",style:{width:"200px"}},null,8,["modelValue"]),e[49]||(e[49]=a("span",{class:"form-unit"},"个",-1)),e[50]||(e[50]=a("span",{class:"form-description"},"单次最多可以上传的文件数量",-1))]),_:1}),l(s,{label:"允许的图片类型"},{default:t(()=>[l(K,{modelValue:_.allowedImageTypes,"onUpdate:modelValue":e[5]||(e[5]=n=>_.allowedImageTypes=n)},{default:t(()=>[l(E,{label:"jpg"},{default:t(()=>[...e[51]||(e[51]=[p("JPG",-1)])]),_:1}),l(E,{label:"jpeg"},{default:t(()=>[...e[52]||(e[52]=[p("JPEG",-1)])]),_:1}),l(E,{label:"png"},{default:t(()=>[...e[53]||(e[53]=[p("PNG",-1)])]),_:1}),l(E,{label:"gif"},{default:t(()=>[...e[54]||(e[54]=[p("GIF",-1)])]),_:1}),l(E,{label:"webp"},{default:t(()=>[...e[55]||(e[55]=[p("WebP",-1)])]),_:1}),l(E,{label:"svg"},{default:t(()=>[...e[56]||(e[56]=[p("SVG",-1)])]),_:1})]),_:1},8,["modelValue"]),e[57]||(e[57]=a("div",{class:"form-description"},"选择允许上传的图片格式",-1))]),_:1}),l(s,{label:"允许的视频类型"},{default:t(()=>[l(K,{modelValue:_.allowedVideoTypes,"onUpdate:modelValue":e[6]||(e[6]=n=>_.allowedVideoTypes=n)},{default:t(()=>[l(E,{label:"mp4"},{default:t(()=>[...e[58]||(e[58]=[p("MP4",-1)])]),_:1}),l(E,{label:"webm"},{default:t(()=>[...e[59]||(e[59]=[p("WebM",-1)])]),_:1}),l(E,{label:"mov"},{default:t(()=>[...e[60]||(e[60]=[p("MOV",-1)])]),_:1}),l(E,{label:"avi"},{default:t(()=>[...e[61]||(e[61]=[p("AVI",-1)])]),_:1}),l(E,{label:"mkv"},{default:t(()=>[...e[62]||(e[62]=[p("MKV",-1)])]),_:1})]),_:1},8,["modelValue"]),e[63]||(e[63]=a("div",{class:"form-description"},"选择允许上传的视频格式",-1))]),_:1}),l(s,{label:"缩略图尺寸",prop:"thumbnailSize"},{default:t(()=>[l(S,{modelValue:_.thumbnailSize,"onUpdate:modelValue":e[7]||(e[7]=n=>_.thumbnailSize=n),min:100,max:1e3,"controls-position":"right",style:{width:"200px"}},null,8,["modelValue"]),e[64]||(e[64]=a("span",{class:"form-unit"},"px",-1)),e[65]||(e[65]=a("span",{class:"form-description"},"生成缩略图的尺寸",-1))]),_:1}),l(s,null,{default:t(()=>[l(v,{type:"primary",onClick:Te,loading:w.value},{default:t(()=>[l(d,null,{default:t(()=>[l(c(T))]),_:1}),e[66]||(e[66]=p(" 保存设置 ",-1))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])):V("",!0),A.value==="security"?(q(),C("div",Rl,[e[78]||(e[78]=a("div",{class:"section-header"},[a("h3",null,"安全设置"),a("p",null,"配置系统安全相关参数")],-1)),l(U,{model:y,rules:Qe,ref_key:"securityFormRef",ref:te,"label-width":"120px",class:"settings-form"},{default:t(()=>[l(s,{label:"密码最小长度",prop:"minPasswordLength"},{default:t(()=>[l(S,{modelValue:y.minPasswordLength,"onUpdate:modelValue":e[8]||(e[8]=n=>y.minPasswordLength=n),min:6,max:20,"controls-position":"right",style:{width:"200px"}},null,8,["modelValue"]),e[68]||(e[68]=a("span",{class:"form-unit"},"位",-1)),e[69]||(e[69]=a("span",{class:"form-description"},"用户密码的最小长度要求",-1))]),_:1}),l(s,{label:"登录失败锁定"},{default:t(()=>[l(I,{modelValue:y.enableLoginLock,"onUpdate:modelValue":e[9]||(e[9]=n=>y.enableLoginLock=n),"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"]),e[70]||(e[70]=a("span",{class:"form-description"},"登录失败次数过多时锁定账户",-1))]),_:1}),y.enableLoginLock?(q(),Q(s,{key:0,label:"最大失败次数",prop:"maxLoginAttempts"},{default:t(()=>[l(S,{modelValue:y.maxLoginAttempts,"onUpdate:modelValue":e[10]||(e[10]=n=>y.maxLoginAttempts=n),min:3,max:10,"controls-position":"right",style:{width:"200px"}},null,8,["modelValue"]),e[71]||(e[71]=a("span",{class:"form-unit"},"次",-1)),e[72]||(e[72]=a("span",{class:"form-description"},"达到此次数后锁定账户",-1))]),_:1})):V("",!0),y.enableLoginLock?(q(),Q(s,{key:1,label:"锁定时间",prop:"lockoutDuration"},{default:t(()=>[l(S,{modelValue:y.lockoutDuration,"onUpdate:modelValue":e[11]||(e[11]=n=>y.lockoutDuration=n),min:5,max:60,"controls-position":"right",style:{width:"200px"}},null,8,["modelValue"]),e[73]||(e[73]=a("span",{class:"form-unit"},"分钟",-1)),e[74]||(e[74]=a("span",{class:"form-description"},"账户锁定的持续时间",-1))]),_:1})):V("",!0),l(s,{label:"会话超时时间",prop:"sessionTimeout"},{default:t(()=>[l(S,{modelValue:y.sessionTimeout,"onUpdate:modelValue":e[12]||(e[12]=n=>y.sessionTimeout=n),min:30,max:1440,"controls-position":"right",style:{width:"200px"}},null,8,["modelValue"]),e[75]||(e[75]=a("span",{class:"form-unit"},"分钟",-1)),e[76]||(e[76]=a("span",{class:"form-description"},"用户会话的超时时间",-1))]),_:1}),l(s,null,{default:t(()=>[l(v,{type:"primary",onClick:Pe,loading:w.value},{default:t(()=>[l(d,null,{default:t(()=>[l(c(T))]),_:1}),e[77]||(e[77]=p(" 保存设置 ",-1))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])):V("",!0),A.value==="notification"?(q(),C("div",Tl,[e[82]||(e[82]=a("div",{class:"section-header"},[a("h3",null,"通知设置"),a("p",null,"配置系统通知相关参数")],-1)),l(U,{model:g,ref_key:"notificationFormRef",ref:Ie,"label-width":"120px",class:"settings-form"},{default:t(()=>[l(s,{label:"邮件通知"},{default:t(()=>[l(I,{modelValue:g.enableEmailNotification,"onUpdate:modelValue":e[13]||(e[13]=n=>g.enableEmailNotification=n),"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"]),e[79]||(e[79]=a("span",{class:"form-description"},"是否启用邮件通知功能",-1))]),_:1}),g.enableEmailNotification?(q(),Q(s,{key:0,label:"SMTP服务器",prop:"smtpHost"},{default:t(()=>[l(k,{modelValue:g.smtpHost,"onUpdate:modelValue":e[14]||(e[14]=n=>g.smtpHost=n),placeholder:"请输入SMTP服务器地址"},null,8,["modelValue"])]),_:1})):V("",!0),g.enableEmailNotification?(q(),Q(s,{key:1,label:"SMTP端口",prop:"smtpPort"},{default:t(()=>[l(S,{modelValue:g.smtpPort,"onUpdate:modelValue":e[15]||(e[15]=n=>g.smtpPort=n),min:1,max:65535,"controls-position":"right",style:{width:"200px"}},null,8,["modelValue"])]),_:1})):V("",!0),g.enableEmailNotification?(q(),Q(s,{key:2,label:"发件人邮箱",prop:"senderEmail"},{default:t(()=>[l(k,{modelValue:g.senderEmail,"onUpdate:modelValue":e[16]||(e[16]=n=>g.senderEmail=n),placeholder:"请输入发件人邮箱"},null,8,["modelValue"])]),_:1})):V("",!0),l(s,{label:"系统通知"},{default:t(()=>[l(I,{modelValue:g.enableSystemNotification,"onUpdate:modelValue":e[17]||(e[17]=n=>g.enableSystemNotification=n),"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"]),e[80]||(e[80]=a("span",{class:"form-description"},"是否在系统内显示通知",-1))]),_:1}),l(s,null,{default:t(()=>[l(v,{type:"primary",onClick:Ne,loading:w.value},{default:t(()=>[l(d,null,{default:t(()=>[l(c(T))]),_:1}),e[81]||(e[81]=p(" 保存设置 ",-1))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])):V("",!0),A.value==="appearance"?(q(),C("div",Pl,[e[92]||(e[92]=a("div",{class:"section-header"},[a("h3",null,"外观设置"),a("p",null,"配置系统界面外观")],-1)),l(U,{model:b,ref_key:"appearanceFormRef",ref:Ae,"label-width":"120px",class:"settings-form"},{default:t(()=>[l(s,{label:"主题模式"},{default:t(()=>[l(O,{modelValue:b.themeMode,"onUpdate:modelValue":e[18]||(e[18]=n=>b.themeMode=n)},{default:t(()=>[l(z,{label:"light"},{default:t(()=>[...e[83]||(e[83]=[p("浅色模式",-1)])]),_:1}),l(z,{label:"dark"},{default:t(()=>[...e[84]||(e[84]=[p("深色模式",-1)])]),_:1}),l(z,{label:"auto"},{default:t(()=>[...e[85]||(e[85]=[p("跟随系统",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"主色调"},{default:t(()=>[l(J,{modelValue:b.primaryColor,"onUpdate:modelValue":e[19]||(e[19]=n=>b.primaryColor=n)},null,8,["modelValue"]),e[86]||(e[86]=a("span",{class:"form-description"},"系统的主色调",-1))]),_:1}),l(s,{label:"侧边栏宽度"},{default:t(()=>[l(X,{modelValue:b.sidebarWidth,"onUpdate:modelValue":e[20]||(e[20]=n=>b.sidebarWidth=n),min:200,max:300,"show-input":"",style:{width:"300px"}},null,8,["modelValue"]),e[87]||(e[87]=a("span",{class:"form-description"},"侧边栏的宽度",-1))]),_:1}),l(s,{label:"页面动画"},{default:t(()=>[l(I,{modelValue:b.enableAnimation,"onUpdate:modelValue":e[21]||(e[21]=n=>b.enableAnimation=n),"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"]),e[88]||(e[88]=a("span",{class:"form-description"},"是否启用页面切换动画",-1))]),_:1}),l(s,{label:"系统Logo"},{default:t(()=>[l(k,{modelValue:b.logoUrl,"onUpdate:modelValue":e[22]||(e[22]=n=>b.logoUrl=n),placeholder:"请输入Logo URL",clearable:""},null,8,["modelValue"]),e[89]||(e[89]=a("span",{class:"form-description"},"系统Logo的URL地址",-1))]),_:1}),l(s,{label:"网站图标"},{default:t(()=>[l(k,{modelValue:b.faviconUrl,"onUpdate:modelValue":e[23]||(e[23]=n=>b.faviconUrl=n),placeholder:"请输入Favicon URL",clearable:""},null,8,["modelValue"]),e[90]||(e[90]=a("span",{class:"form-description"},"网站图标的URL地址",-1))]),_:1}),l(s,null,{default:t(()=>[l(v,{type:"primary",onClick:ze,loading:w.value},{default:t(()=>[l(d,null,{default:t(()=>[l(c(T))]),_:1}),e[91]||(e[91]=p(" 保存设置 ",-1))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])):V("",!0),A.value==="integration"?(q(),C("div",Nl,[e[113]||(e[113]=a("div",{class:"section-header"},[a("h3",null,"第三方集成"),a("p",null,"配置第三方登录和集成服务")],-1)),l(U,{model:o,ref_key:"integrationFormRef",ref:ae,"label-width":"140px",class:"settings-form"},{default:t(()=>[l(B,{"content-position":"left"},{default:t(()=>[l(d,null,{default:t(()=>[l(c($))]),_:1}),e[93]||(e[93]=p(" QQ登录集成 ",-1))]),_:1}),l(s,{label:"启用QQ登录"},{default:t(()=>[l(I,{modelValue:o.qqLoginEnabled,"onUpdate:modelValue":e[24]||(e[24]=n=>o.qqLoginEnabled=n),"active-text":"开启","inactive-text":"关闭",onChange:je},null,8,["modelValue"]),e[94]||(e[94]=a("span",{class:"form-description"},"允许用户使用QQ账号登录系统",-1))]),_:1}),l(s,{label:"QQ应用ID",prop:"qqAppId",rules:[{required:o.qqLoginEnabled,message:"QQ应用ID不能为空",trigger:"blur"}]},{default:t(()=>[l(k,{modelValue:o.qqAppId,"onUpdate:modelValue":e[25]||(e[25]=n=>o.qqAppId=n),placeholder:"请输入QQ应用ID",disabled:!o.qqLoginEnabled,clearable:""},null,8,["modelValue","disabled"]),a("div",zl,[l(W,{type:"primary",href:"https://connect.qq.com/",target:"_blank"},{default:t(()=>[...e[95]||(e[95]=[p(" 获取QQ应用ID ",-1)])]),_:1})])]),_:1},8,["rules"]),l(s,{label:"QQ应用密钥",prop:"qqAppKey",rules:[{required:o.qqLoginEnabled,message:"QQ应用密钥不能为空",trigger:"blur"}]},{default:t(()=>[l(k,{modelValue:o.qqAppKey,"onUpdate:modelValue":e[26]||(e[26]=n=>o.qqAppKey=n),type:"password",placeholder:"请输入QQ应用密钥",disabled:!o.qqLoginEnabled,"show-password":"",clearable:""},null,8,["modelValue","disabled"]),e[96]||(e[96]=a("div",{class:"form-description"},"QQ应用的密钥，用于验证应用身份",-1))]),_:1},8,["rules"]),o.qqLoginEnabled?(q(),Q(s,{key:0},{default:t(()=>[l(G,{title:"QQ登录配置说明",type:"info",closable:!1,"show-icon":""},{default:t(()=>[e[98]||(e[98]=a("p",null,"1. 在QQ互联平台创建应用并获取App ID和App Key",-1)),a("p",null,[e[97]||(e[97]=p("2. 设置回调地址为：",-1)),a("code",null,re(ue("qq")),1)]),e[99]||(e[99]=a("p",null,'3. 确保应用状态为"已上线"',-1))]),_:1})]),_:1})):V("",!0),l(B,{"content-position":"left"},{default:t(()=>[l(d,null,{default:t(()=>[l(c($))]),_:1}),e[100]||(e[100]=p(" 微信登录集成 ",-1))]),_:1}),l(s,{label:"启用微信登录"},{default:t(()=>[l(I,{modelValue:o.wechatLoginEnabled,"onUpdate:modelValue":e[27]||(e[27]=n=>o.wechatLoginEnabled=n),"active-text":"开启","inactive-text":"关闭",onChange:Ke},null,8,["modelValue"]),e[101]||(e[101]=a("span",{class:"form-description"},"允许用户使用微信账号登录系统",-1))]),_:1}),l(s,{label:"微信应用ID",prop:"wechatAppId",rules:[{required:o.wechatLoginEnabled,message:"微信应用ID不能为空",trigger:"blur"}]},{default:t(()=>[l(k,{modelValue:o.wechatAppId,"onUpdate:modelValue":e[28]||(e[28]=n=>o.wechatAppId=n),placeholder:"请输入微信应用ID",disabled:!o.wechatLoginEnabled,clearable:""},null,8,["modelValue","disabled"]),a("div",Bl,[l(W,{type:"primary",href:"https://developers.weixin.qq.com/",target:"_blank"},{default:t(()=>[...e[102]||(e[102]=[p(" 获取微信应用ID ",-1)])]),_:1})])]),_:1},8,["rules"]),l(s,{label:"微信应用密钥",prop:"wechatAppSecret",rules:[{required:o.wechatLoginEnabled,message:"微信应用密钥不能为空",trigger:"blur"}]},{default:t(()=>[l(k,{modelValue:o.wechatAppSecret,"onUpdate:modelValue":e[29]||(e[29]=n=>o.wechatAppSecret=n),type:"password",placeholder:"请输入微信应用密钥",disabled:!o.wechatLoginEnabled,"show-password":"",clearable:""},null,8,["modelValue","disabled"]),e[103]||(e[103]=a("div",{class:"form-description"},"微信应用的密钥，用于验证应用身份",-1))]),_:1},8,["rules"]),o.wechatLoginEnabled?(q(),Q(s,{key:1},{default:t(()=>[l(G,{title:"微信登录配置说明",type:"info",closable:!1,"show-icon":""},{default:t(()=>[e[105]||(e[105]=a("p",null,"1. 在微信开放平台创建网站应用",-1)),a("p",null,[e[104]||(e[104]=p("2. 设置回调地址为：",-1)),a("code",null,re(ue("wechat")),1)]),e[106]||(e[106]=a("p",null,"3. 确保应用已通过审核",-1))]),_:1})]),_:1})):V("",!0),l(B,{"content-position":"left"},{default:t(()=>[l(d,null,{default:t(()=>[l(c(ie))]),_:1}),e[107]||(e[107]=p(" 连接测试 ",-1))]),_:1}),l(s,{label:"测试连接"},{default:t(()=>[l(v,{type:"success",onClick:We,disabled:!o.qqLoginEnabled||!o.qqAppId,loading:oe.value},{default:t(()=>[l(d,null,{default:t(()=>[l(c($))]),_:1}),e[108]||(e[108]=p(" 测试QQ连接 ",-1))]),_:1},8,["disabled","loading"]),l(v,{type:"success",onClick:Ge,disabled:!o.wechatLoginEnabled||!o.wechatAppId,loading:se.value,style:{"margin-left":"12px"}},{default:t(()=>[l(d,null,{default:t(()=>[l(c($))]),_:1}),e[109]||(e[109]=p(" 测试微信连接 ",-1))]),_:1},8,["disabled","loading"]),e[110]||(e[110]=a("div",{class:"form-description"},"测试第三方登录配置是否正确",-1))]),_:1}),l(s,null,{default:t(()=>[l(v,{type:"primary",onClick:Be,loading:w.value,disabled:!H.value},{default:t(()=>[l(d,null,{default:t(()=>[l(c(T))]),_:1}),p(" "+re(H.value?"保存设置":"已保存"),1)]),_:1},8,["loading","disabled"]),l(v,{onClick:Je,style:{"margin-left":"12px"},disabled:!H.value},{default:t(()=>[l(d,null,{default:t(()=>[l(c(Se))]),_:1}),e[111]||(e[111]=p(" 重置 ",-1))]),_:1},8,["disabled"]),H.value?(q(),C("div",jl,[l(d,null,{default:t(()=>[l(c(xl))]),_:1}),e[112]||(e[112]=p(" 检测到未保存的更改 ",-1))])):V("",!0)]),_:1})]),_:1},8,["model"])])):V("",!0),A.value==="maintenance"?(q(),C("div",Kl,[e[123]||(e[123]=a("div",{class:"section-header"},[a("h3",null,"维护设置"),a("p",null,"配置系统维护相关参数")],-1)),l(U,{model:f,rules:Me,ref_key:"maintenanceFormRef",ref:ne,"label-width":"120px",class:"settings-form"},{default:t(()=>[l(s,{label:"维护模式"},{default:t(()=>[l(I,{modelValue:f.maintenanceMode,"onUpdate:modelValue":e[30]||(e[30]=n=>f.maintenanceMode=n),"active-text":"开启","inactive-text":"关闭",onChange:$e},null,8,["modelValue"]),e[114]||(e[114]=a("span",{class:"form-description"},"开启后，非管理员用户将无法访问系统",-1))]),_:1}),f.maintenanceMode?(q(),Q(s,{key:0,label:"维护消息",prop:"maintenanceMessage"},{default:t(()=>[l(k,{modelValue:f.maintenanceMessage,"onUpdate:modelValue":e[31]||(e[31]=n=>f.maintenanceMessage=n),type:"textarea",rows:4,placeholder:"请输入维护提示消息",maxlength:"500","show-word-limit":""},null,8,["modelValue"]),e[115]||(e[115]=a("div",{class:"form-description"},"维护模式下显示给用户的提示信息",-1))]),_:1})):V("",!0),l(s,{label:"自动备份"},{default:t(()=>[l(I,{modelValue:f.backupEnabled,"onUpdate:modelValue":e[32]||(e[32]=n=>f.backupEnabled=n),"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"]),e[116]||(e[116]=a("span",{class:"form-description"},"定期自动备份系统数据",-1))]),_:1}),f.backupEnabled?(q(),Q(s,{key:1,label:"备份频率",prop:"backupFrequency"},{default:t(()=>[l(Y,{modelValue:f.backupFrequency,"onUpdate:modelValue":e[33]||(e[33]=n=>f.backupFrequency=n),placeholder:"请选择备份频率"},{default:t(()=>[l(j,{label:"每小时",value:"hourly"}),l(j,{label:"每天",value:"daily"}),l(j,{label:"每周",value:"weekly"})]),_:1},8,["modelValue"]),e[117]||(e[117]=a("div",{class:"form-description"},"选择数据备份的频率",-1))]),_:1})):V("",!0),f.backupEnabled?(q(),Q(s,{key:2,label:"备份保留天数",prop:"backupRetentionDays"},{default:t(()=>[l(S,{modelValue:f.backupRetentionDays,"onUpdate:modelValue":e[34]||(e[34]=n=>f.backupRetentionDays=n),min:1,max:365,"controls-position":"right",style:{width:"200px"}},null,8,["modelValue"]),e[118]||(e[118]=a("span",{class:"form-unit"},"天",-1)),e[119]||(e[119]=a("span",{class:"form-description"},"备份文件的保留时间",-1))]),_:1})):V("",!0),l(s,{label:"自动清理日志"},{default:t(()=>[l(I,{modelValue:f.autoCleanLogs,"onUpdate:modelValue":e[35]||(e[35]=n=>f.autoCleanLogs=n),"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"]),e[120]||(e[120]=a("span",{class:"form-description"},"定期清理过期的系统日志",-1))]),_:1}),l(s,null,{default:t(()=>[l(v,{type:"primary",onClick:He,loading:w.value},{default:t(()=>[l(d,null,{default:t(()=>[l(c(T))]),_:1}),e[121]||(e[121]=p(" 保存设置 ",-1))]),_:1},8,["loading"]),l(v,{type:"warning",onClick:Oe,style:{"margin-left":"12px"},disabled:!f.maintenanceMode},{default:t(()=>[l(d,null,{default:t(()=>[l(c(ie))]),_:1}),e[122]||(e[122]=p(" 测试维护模式 ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"])])):V("",!0)]),_:1})]),_:1})]),_:1})])])}}}),gt=Xe(Wl,[["__scopeId","data-v-92239f6d"]]);export{gt as default};
