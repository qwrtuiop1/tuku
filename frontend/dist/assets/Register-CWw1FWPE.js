import{_ as Z}from"./_plugin-vue_export-helper-BwE83l92.js";/* empty css                *//* empty css                    */import"./el-form-item-l0sNRNKZ.js";/* empty css                 */import{y as H,c as X,r as c,l as R,j as Y,U as ee,z as g,B as s,aB as se,R as t,J as a,W as te,O as u,al as le,A as f,u as i,L as E,P as b,E as ae,Q as oe,a6 as ie,a4 as ne,I as re,aC as de}from"./vendor-BcB6VvZI.js";import{b as ue,c as pe,d as me,p as ce,g as V,u as fe,e as ve,f as ge,o as _e,l as P,h as we,r as he,j as be,q as xe,s as ye,E as v}from"./element-BdwomdJ_.js";import{u as Ee}from"./index-B5yWHJPk.js";import{i as q,a as Ve}from"./helpers-iwoUo1o7.js";const Ce={class:"register-container"},ke={class:"top-nav"},Ie={class:"nav-content"},Ue={class:"nav-logo"},ze={class:"nav-actions"},Pe={class:"register-content"},Te={class:"register-box"},Se={class:"register-header"},Be={class:"header-icon"},Re={key:0,class:"email-verification-section"},qe={class:"verification-input-row"},Fe={key:0,class:"code-tips"},Ne={class:"code-timer"},$e={key:0,class:"password-hint"},je={class:"password-strength"},Ae={key:0,class:"password-requirements"},Le={class:"requirement-list"},Me={class:"social-register"},Oe={class:"register-footer"},Qe={class:"login-link"},Je={class:"info-panel"},Ke={class:"panel-content"},We={class:"benefit-list"},De={class:"benefit-item"},Ge={class:"benefit-item"},Ze={class:"benefit-item"},He={class:"benefit-item"},Xe=H({__name:"Register",setup(Ye){const T=de(),C=Ee();X(()=>window.innerWidth<=768);const I=c(),o=R({username:"",email:"",password:"",confirmPassword:""}),U=c(!1),r=R({level:"weak",text:"弱",hints:[]}),k=c(""),S=c(!1),p=c(0),x=c(0),_=c(null),w=c(null),F=(n,e,l)=>{e?Ve(e)?e.includes("@")?l(new Error("用户名不能使用邮箱格式")):l():l(new Error("用户名只能包含字母、数字和下划线，长度3-20位")):l(new Error("请输入用户名"))},N=(n,e,l)=>{e?q(e)?l():l(new Error("请输入有效的邮箱地址")):l(new Error("请输入邮箱地址"))},$=(n,e,l)=>{e?e.length<6?l(new Error("密码长度不能少于6位")):l():l(new Error("请输入密码"))},j=(n,e,l)=>{e?e!==o.password?l(new Error("两次输入的密码不一致")):l():l(new Error("请确认密码"))},A=()=>{const n=o.password;if(!n){r.level="weak",r.text="弱",r.hints=[];return}const e=[];let l=0;n.length<6?e.push("至少6个字符"):l++,/[a-z]/.test(n)?l++:e.push("包含小写字母"),/[A-Z]/.test(n)?l++:e.push("包含大写字母"),/[0-9]/.test(n)?l++:e.push("包含数字"),/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(n)?l++:e.push("包含特殊字符"),l>=4?(r.level="strong",r.text="强"):l>=2?(r.level="medium",r.text="中"):(r.level="weak",r.text="弱"),r.hints=e},L={username:[{validator:F,trigger:"blur"}],email:[{validator:N,trigger:"blur"}],password:[{validator:$,trigger:"blur"}],confirmPassword:[{validator:j,trigger:"blur"}]},B=async()=>{if(!o.email){v.warning("请先输入邮箱地址");return}if(!q(o.email)){v.warning("请输入有效的邮箱地址");return}try{const l=await(await fetch("https://tukubackend.vtart.cn/api/auth/send-email-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o.email,type:"verify_email"})})).json();l.success?(v.success("验证码已发送到您的邮箱"),S.value=!0,O(),Q()):v.error(l.message||"发送验证码失败")}catch{v.error("发送验证码失败，请稍后重试")}},M=async()=>{if(p.value>0){v.warning(`请等待 ${p.value} 秒后再试`);return}await B()},O=()=>{p.value=60,_.value=setInterval(()=>{p.value--,p.value<=0&&(clearInterval(_.value),_.value=null)},1e3)},Q=()=>{x.value=300,w.value=setInterval(()=>{x.value--,x.value<=0&&(clearInterval(w.value),w.value=null)},1e3)},J=()=>{_.value&&(clearInterval(_.value),_.value=null),w.value&&(clearInterval(w.value),w.value=null)},z=async()=>{if(I.value)try{if(await I.value.validate(),!k.value){v.warning("请输入邮箱验证码");return}if(x.value<=0){v.warning("验证码已过期，请重新发送");return}await C.register({username:o.username,email:o.email,password:o.password,emailCode:k.value})&&T.push("/")}catch{}},K=()=>{T.push("/login")};return Y(()=>{}),ee(()=>{J()}),(n,e)=>{const l=ue,m=pe,y=ge,h=ve,W=we,D=me,G=le("router-link");return f(),g("div",Ce,[s("div",ke,[s("div",Ie,[s("div",Ue,[t(l,{class:"logo-icon"},{default:a(()=>[t(i(ce))]),_:1}),e[6]||(e[6]=s("span",{class:"logo-text"},"图库系统",-1))]),s("div",ze,[t(m,{type:"text",onClick:K},{default:a(()=>[t(l,null,{default:a(()=>[t(i(V))]),_:1}),e[7]||(e[7]=u(" 登录 ",-1))]),_:1})])])]),s("div",Pe,[s("div",Te,[s("div",Se,[s("div",Be,[t(l,null,{default:a(()=>[t(i(fe))]),_:1})]),e[8]||(e[8]=s("h1",{class:"register-title"},"创建账户",-1)),e[9]||(e[9]=s("p",{class:"register-subtitle"},"注册新账户，开始您的文件管理之旅",-1))]),t(D,{ref_key:"registerFormRef",ref:I,model:o,rules:L,class:"register-form",onSubmit:te(z,["prevent"])},{default:a(()=>[t(h,{prop:"username"},{default:a(()=>[t(y,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=d=>o.username=d),placeholder:"请输入用户名",size:"large","prefix-icon":i(V),clearable:"",class:"custom-input"},null,8,["modelValue","prefix-icon"])]),_:1}),t(h,{prop:"email"},{default:a(()=>[t(y,{modelValue:o.email,"onUpdate:modelValue":e[1]||(e[1]=d=>o.email=d),placeholder:"请输入邮箱地址",size:"large","prefix-icon":i(_e),clearable:"",class:"custom-input"},null,8,["modelValue","prefix-icon"]),o.email?(f(),g("div",Re,[s("div",qe,[t(y,{modelValue:k.value,"onUpdate:modelValue":e[2]||(e[2]=d=>k.value=d),placeholder:"请输入6位验证码",class:"email-code-input",maxlength:"6",size:"large"},null,8,["modelValue"]),t(m,{type:"primary",size:"large",disabled:p.value>0,onClick:B,class:"send-code-btn"},{default:a(()=>[u(b(p.value>0?`${p.value}s`:"发送验证码"),1)]),_:1},8,["disabled"])]),S.value?(f(),g("div",Fe,[s("span",Ne,"验证码有效期："+b(x.value)+"s",1),t(m,{type:"text",onClick:M,disabled:p.value>0},{default:a(()=>[u(b(p.value>0?`${p.value}s后重发`:"重新发送"),1)]),_:1},8,["disabled"])])):E("",!0)])):E("",!0)]),_:1}),t(h,{prop:"password"},{default:a(()=>[t(y,{modelValue:o.password,"onUpdate:modelValue":e[3]||(e[3]=d=>o.password=d),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":i(P),"show-password":"",class:"custom-input",onInput:A},null,8,["modelValue","prefix-icon"]),o.password?(f(),g("div",$e,[s("div",je,[e[10]||(e[10]=s("span",{class:"strength-label"},"密码强度：",-1)),s("span",{class:ae(["strength-level",r.level])},b(r.text),3)]),r.hints.length>0?(f(),g("div",Ae,[e[11]||(e[11]=s("div",{class:"requirement-title"},"密码要求：",-1)),s("ul",Le,[(f(!0),g(oe,null,ie(r.hints,d=>(f(),g("li",{key:d,class:"requirement-item"},b(d),1))),128))])])):E("",!0)])):E("",!0)]),_:1}),t(h,{prop:"confirmPassword"},{default:a(()=>[t(y,{modelValue:o.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=d=>o.confirmPassword=d),type:"password",placeholder:"请确认密码",size:"large","prefix-icon":i(P),"show-password":"",class:"custom-input",onKeyup:ne(z,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),t(h,{class:"agreement-row"},{default:a(()=>[t(W,{modelValue:U.value,"onUpdate:modelValue":e[5]||(e[5]=d=>U.value=d),class:"agreement-checkbox"},{default:a(()=>[e[14]||(e[14]=u(" 我已阅读并同意 ",-1)),t(m,{type:"text",class:"terms-link"},{default:a(()=>[...e[12]||(e[12]=[u("《用户协议》",-1)])]),_:1}),e[15]||(e[15]=u(" 和 ",-1)),t(m,{type:"text",class:"terms-link"},{default:a(()=>[...e[13]||(e[13]=[u("《隐私政策》",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(h,null,{default:a(()=>[t(m,{type:"primary",size:"large",class:"register-button",loading:i(C).loading,disabled:!U.value,onClick:z},{default:a(()=>[i(C).loading?E("",!0):(f(),re(l,{key:0},{default:a(()=>[t(i(he))]),_:1})),u(" "+b(i(C).loading?"注册中...":"立即注册"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["model"]),e[20]||(e[20]=s("div",{class:"register-divider"},[s("span",{class:"divider-text"},"或")],-1)),s("div",Me,[t(m,{class:"social-btn qq-btn"},{default:a(()=>[t(l,null,{default:a(()=>[t(i(V))]),_:1}),e[16]||(e[16]=u(" QQ注册 ",-1))]),_:1}),t(m,{class:"social-btn wechat-btn"},{default:a(()=>[t(l,null,{default:a(()=>[t(i(V))]),_:1}),e[17]||(e[17]=u(" 微信注册 ",-1))]),_:1})]),s("div",Oe,[s("p",Qe,[e[19]||(e[19]=u(" 已有账户？ ",-1)),t(G,{to:"/login",class:"link"},{default:a(()=>[t(l,null,{default:a(()=>[t(i(V))]),_:1}),e[18]||(e[18]=u(" 立即登录 ",-1))]),_:1})])])]),s("div",Je,[s("div",Ke,[e[25]||(e[25]=s("h2",{class:"panel-title"},"加入图库系统",-1)),s("div",We,[s("div",De,[t(l,{class:"benefit-icon"},{default:a(()=>[t(i(be))]),_:1}),e[21]||(e[21]=s("div",{class:"benefit-content"},[s("h3",null,"免费存储空间"),s("p",null,"注册即获得1GB免费存储空间，满足日常使用需求")],-1))]),s("div",Ge,[t(l,{class:"benefit-icon"},{default:a(()=>[t(i(xe))]),_:1}),e[22]||(e[22]=s("div",{class:"benefit-content"},[s("h3",null,"智能文件管理"),s("p",null,"自动分类整理，快速查找，让文件管理变得简单")],-1))]),s("div",Ze,[t(l,{class:"benefit-icon"},{default:a(()=>[t(i(ye))]),_:1}),e[23]||(e[23]=s("div",{class:"benefit-content"},[s("h3",null,"便捷分享功能"),s("p",null,"一键生成分享链接，轻松与他人分享您的文件")],-1))]),s("div",He,[t(l,{class:"benefit-icon"},{default:a(()=>[t(i(P))]),_:1}),e[24]||(e[24]=s("div",{class:"benefit-content"},[s("h3",null,"安全保障"),s("p",null,"企业级安全防护，您的文件隐私得到充分保护")],-1))])])])])]),e[26]||(e[26]=se('<div class="bg-decoration" data-v-46ad42e1><div class="floating-shape shape-1" data-v-46ad42e1></div><div class="floating-shape shape-2" data-v-46ad42e1></div><div class="floating-shape shape-3" data-v-46ad42e1></div><div class="floating-shape shape-4" data-v-46ad42e1></div></div>',1))])}}}),ds=Z(Xe,[["__scopeId","data-v-46ad42e1"]]);export{ds as default};
