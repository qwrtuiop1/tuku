import{_ as M}from"./_plugin-vue_export-helper-BwE83l92.js";/* empty css                *//* empty css                    */import"./el-form-item-l0sNRNKZ.js";/* empty css                 */import{y as N,c as P,r as k,l as S,j as z,z as T,B as s,aB as W,R as o,J as t,W as K,O as r,al as h,A as x,aC as j,u as l,a4 as A,I as O,L as $,P as D}from"./vendor-BcB6VvZI.js";import{b as J,c as G,d as H,u as y,l as V,e as X,f as Y,g as w,h as Z,r as ee,j as se,v as oe,E as d}from"./element-_v7tGFXC.js";import{u as te,a as ae}from"./index-DwK9vE5V.js";const le={class:"login-container"},ne={class:"top-nav"},re={class:"nav-content"},ie={class:"nav-logo"},de={class:"nav-actions"},ue={class:"login-content"},ce={class:"login-box"},pe={class:"login-header"},me={class:"header-icon"},fe={class:"remember-forgot-container"},_e={class:"social-login"},ge={class:"login-footer"},ve={class:"register-link"},be={class:"info-panel"},he={class:"panel-content"},we={class:"feature-list"},Qe={class:"feature-item"},ke={class:"feature-item"},xe={class:"feature-item"},ye=N({__name:"Login",setup(Ve){const _=j(),m=te();P(()=>window.innerWidth<=768);const g=k(),i=S({username:"",password:""}),v=k(localStorage.getItem("rememberMe")==="true"),C={username:[{required:!0,message:"请输入用户名或邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]},b=async()=>{if(g.value)try{await g.value.validate(),await m.login({...i,rememberMe:v.value})&&_.push("/")}catch{}},R=()=>{_.push("/register")},E=()=>{_.push("/forgot-password")},L=async()=>{var u,e;try{console.log("开始获取QQ授权URL...");const a=await ae.get("/auth/qq/auth");console.log("QQ授权URL响应:",a.data),a.data.success?(console.log("跳转到QQ授权页面:",a.data.authUrl),window.location.href=a.data.authUrl):(console.error("QQ授权URL获取失败:",a.data.message),d.error(`QQ登录服务暂不可用: ${a.data.message}`))}catch(a){console.error("QQ登录请求失败:",a),a.code==="ERR_NETWORK"?d.error("网络连接失败，请检查网络连接"):((u=a.response)==null?void 0:u.status)===404?d.error("QQ登录接口不存在"):((e=a.response)==null?void 0:e.status)===500?d.error("服务器内部错误，请联系管理员"):d.error(`QQ登录失败: ${a.message||"请重试"}`)}},U=()=>{d.info("微信登录功能开发中...")};return z(()=>{}),(u,e)=>{const a=h("Picture"),n=J,c=G,Q=Y,f=X,B=Z,q=H,F=h("router-link"),I=h("Platform");return x(),T("div",le,[s("div",ne,[s("div",re,[s("div",ie,[o(n,{class:"logo-icon"},{default:t(()=>[o(a)]),_:1}),e[3]||(e[3]=s("span",{class:"logo-text"},"图库系统",-1))]),s("div",de,[o(c,{type:"text",onClick:R},{default:t(()=>[o(n,null,{default:t(()=>[o(l(y))]),_:1}),e[4]||(e[4]=r(" 注册 ",-1))]),_:1})])])]),s("div",ue,[s("div",ce,[s("div",pe,[s("div",me,[o(n,null,{default:t(()=>[o(l(V))]),_:1})]),e[5]||(e[5]=s("h1",{class:"login-title"},"欢迎回来",-1)),e[6]||(e[6]=s("p",{class:"login-subtitle"},"登录您的账户以继续使用图库系统",-1))]),o(q,{ref_key:"loginFormRef",ref:g,model:i,rules:C,class:"login-form",onSubmit:K(b,["prevent"])},{default:t(()=>[o(f,{prop:"username"},{default:t(()=>[o(Q,{modelValue:i.username,"onUpdate:modelValue":e[0]||(e[0]=p=>i.username=p),placeholder:"请输入用户名或邮箱",size:"large","prefix-icon":l(w),clearable:"",class:"custom-input"},null,8,["modelValue","prefix-icon"])]),_:1}),o(f,{prop:"password"},{default:t(()=>[o(Q,{modelValue:i.password,"onUpdate:modelValue":e[1]||(e[1]=p=>i.password=p),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":l(V),"show-password":"",class:"custom-input",onKeyup:A(b,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),o(f,{class:"remember-row"},{default:t(()=>[s("div",fe,[o(B,{modelValue:v.value,"onUpdate:modelValue":e[2]||(e[2]=p=>v.value=p),class:"remember-checkbox"},{default:t(()=>[...e[7]||(e[7]=[s("span",{class:"remember-text"},"记住我",-1),s("span",{class:"remember-hint"},"（30天内免登录）",-1)])]),_:1},8,["modelValue"]),o(c,{type:"text",class:"forgot-password",onClick:E},{default:t(()=>[...e[8]||(e[8]=[r(" 忘记密码？ ",-1)])]),_:1})])]),_:1}),o(f,null,{default:t(()=>[o(c,{type:"primary",size:"large",class:"login-button",loading:l(m).loading,onClick:b},{default:t(()=>[l(m).loading?$("",!0):(x(),O(n,{key:0},{default:t(()=>[o(l(ee))]),_:1})),r(" "+D(l(m).loading?"登录中...":"立即登录"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),e[13]||(e[13]=s("div",{class:"login-divider"},[s("span",{class:"divider-text"},"或")],-1)),s("div",_e,[o(c,{class:"social-btn qq-btn",onClick:L},{default:t(()=>[o(n,null,{default:t(()=>[o(l(w))]),_:1}),e[9]||(e[9]=r(" QQ登录 ",-1))]),_:1}),o(c,{class:"social-btn wechat-btn",onClick:U},{default:t(()=>[o(n,null,{default:t(()=>[o(l(w))]),_:1}),e[10]||(e[10]=r(" 微信登录 ",-1))]),_:1})]),s("div",ge,[s("p",ve,[e[12]||(e[12]=r(" 还没有账户？ ",-1)),o(F,{to:"/register",class:"link"},{default:t(()=>[o(n,null,{default:t(()=>[o(l(y))]),_:1}),e[11]||(e[11]=r(" 立即注册 ",-1))]),_:1})])])]),s("div",be,[s("div",he,[e[17]||(e[17]=s("h2",{class:"panel-title"},"为什么选择图库系统？",-1)),s("div",we,[s("div",Qe,[o(n,{class:"feature-icon"},{default:t(()=>[o(l(se))]),_:1}),e[14]||(e[14]=s("div",{class:"feature-content"},[s("h3",null,"快速上传"),s("p",null,"支持拖拽上传，批量处理，让文件管理更高效")],-1))]),s("div",ke,[o(n,{class:"feature-icon"},{default:t(()=>[o(l(oe))]),_:1}),e[15]||(e[15]=s("div",{class:"feature-content"},[s("h3",null,"在线预览"),s("p",null,"图片、视频在线预览，无需下载即可查看")],-1))]),s("div",xe,[o(n,{class:"feature-icon"},{default:t(()=>[o(I)]),_:1}),e[16]||(e[16]=s("div",{class:"feature-content"},[s("h3",null,"安全可靠"),s("p",null,"企业级安全防护，保护您的文件隐私")],-1))])])])])]),e[18]||(e[18]=W('<div class="bg-decoration" data-v-c09b11a9><div class="floating-shape shape-1" data-v-c09b11a9></div><div class="floating-shape shape-2" data-v-c09b11a9></div><div class="floating-shape shape-3" data-v-c09b11a9></div><div class="floating-shape shape-4" data-v-c09b11a9></div></div>',1))])}}}),Ie=M(ye,[["__scopeId","data-v-c09b11a9"]]);export{Ie as default};
